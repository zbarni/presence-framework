<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 2. Installing Jopr and Mobicents JAIN SLEE Plugin</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="Mobicents JAIN SLEE Jopr Plugin User Guide"/><link rel="up" href="index.html" title="Mobicents JAIN SLEE Jopr Plugin User Guide"/><link rel="prev" href="introduction.html" title="Chapter 1. Introduction to Jopr and Mobicents JAIN SLEE Plugin"/><link rel="next" href="management.html" title="Chapter 3. Managing Mobicents JAIN SLEE with Jopr"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="introduction.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="management.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="install"/>Chapter 2. Installing Jopr and Mobicents <acronym class="acronym">JAIN SLEE</acronym> Plugin</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="install.html#preinstall_requirements_and_prerequisites">2.1. Pre-Install Requirements and Prerequisites</a></span></dt><dd><dl><dt><span class="section"><a href="install.html#hardware_requirements">2.1.1. Hardware Requirements</a></span></dt><dt><span class="section"><a href="install.html#software_prerequisites">2.1.2. Software Prerequisites</a></span></dt></dl></dd><dt><span class="section"><a href="install.html#install_alternatives">2.2. Install Jopr and Mobicents JAIN SLEE Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="install.html#install_mgmt_server_and_agent">2.2.1. Installing Jopr Server and Agent</a></span></dt><dt><span class="section"><a href="install.html#install_jslee_plugin">2.2.2. Installing the Mobicents JAIN SLEE Plugin</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="preinstall_requirements_and_prerequisites"/>2.1. Pre-Install Requirements and Prerequisites</h2></div></div></div><p>Ensure that the following requirements have been met before continuing with the install.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="hardware_requirements"/>2.1.1. Hardware Requirements</h3></div></div></div><div class="variablelist"><dl><dt><span class="term">Sufficient Disk Space</span></dt><dd><p>Once unzipped, the Jopr binary release requires <span class="emphasis"><em>at least</em></span> 300MB of free disk space.  Keep in mind that disk space requirements may change from release to release.</p></dd><dt><span class="term">Anything Java Itself Will Run On</span></dt><dd><p>The Jopr platform will run on the same hardware that the JBoss Application Server runs on, but it is recommended at least 2GB or 4GB of RAM memory, for 32 or 64 bit Operating Systems.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="software_prerequisites"/>2.1.2. Software Prerequisites</h3></div></div></div><div class="variablelist"><dl><dt><span class="term">JDK 5 or Higher</span></dt><dd><p>A working installation of the Java Development Kit (<acronym class="acronym">JDK</acronym>) version 5 or higher is required in order to run the Jopr. Note that JBoss Application Server is a runtime dependency, but comes bundled with the binary distribution.</p><p>For instructions on how to install the JDK, refer to  <a class="xref" href="jdk-installing_configuring_and_running.html" title="Appendix A. Java Development Kit (JDK): Installing, Configuring and Running">Appendix A, <i>Java Development Kit (JDK): Installing, Configuring and Running</i></a>.</p></dd><dt><span class="term">External Database</span></dt><dd><p>In order to run Jopr, an external database must be installed.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Use of Embedded H2 database</h2><p>Jopr is distributed with a Java embedded database called "H2", so if you are just running Jopr to test it out and play with it, you can use that and not install an external database. But this Embedded H2 database is to be considered only for demo'ing and testing purposes. For production systems, you will need to install an external database.</p></div><div class="variablelist"><p class="title"><b>The supported databases are:</b></p><dl><dt><span class="term">PostgreSQL</span></dt><dd><p>Postgres versions 8.2.4 and higher are supported.</p></dd><dt><span class="term">Oracle</span></dt><dd><p>Oracle versions 10g and 11g are supported.</p></dd></dl></div><p>After installing the database, make note of the <acronym class="acronym">JDBC</acronym> <acronym class="acronym">URL</acronym>, username and password for the database. This information is required during  the Jopr Server installation.</p></dd></dl></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="install_alternatives"/>2.2. Install Jopr and Mobicents JAIN SLEE Plugin</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="install_mgmt_server_and_agent"/>2.2.1. Installing Jopr Server and Agent</h3></div></div></div><p>Jopr is based on and plugin-compatible with the multi-vendor RHQ management project. For the Mobicents Plugin to work correctly, version 1.4.x  of RHQ is required.</p><p>Since there's no released version of Jopr based on RHQ 1.4.x yet, RHQ itself will be used instead.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>Download RHQ Server from <a class="ulink" href="http://sourceforge.net/projects/rhq/">SourceForge</a>. This is the platform server, which will be responsible for storing, processing and presenting the data received by the agent(s).</p></li><li><p>Unzip the distribution in a suitable place (i.e. in a directory not too deeply nested and with no spaces or non-ASCII characters in its name)</p></li><li><p><span class="emphasis"><em>This step is optional, if you're using Embedded H2 Database, you can skip to next</em></span></p><p>Install a database like PostgreSQL (version 8.2.4 +, please choose C locale for initdb), create a database instance called 'rhq' in it and a user 'rhqadmin' that owns this 'rhq' database.</p><pre class="screen">create user rhqadmin password 'rhqadmin';

	create database rhq owner rhqadmin;</pre></li><li><p>Eventually set RHQ_SERVER_JAVA_HOME or RHQ_SERVER_JAVA_EXE_FILE_PATH env variables appropriately. This is needed if your JAVA_HOME does not point to a java installation that is valid with Jopr (e.g. JAVA 1.4); Jopr requires JAVA 5+.</p></li><li><p>In a terminal console, cd into the installation directory and start the Server:</p><pre class="screen">bin/rhq-server.[sh|bat] console</pre></li><li><p>After a few seconds, the messages on the console will stop. When this happens, point your browser to http://localhost:7080/ and run the installer:</p><div class="orderedlist"><ol><li><p>Click on <span class="guilabel"><strong>Click here to continue the installation</strong></span></p></li><li><p>Choose your desired and installed database from the <span class="guilabel"><strong>Database Type</strong></span> drop down list. If you don't want to install/use an external Database, choose <span class="guilabel"><strong>H2 (embedded)</strong></span>.</p></li><li><p>Default settings should be fine to install the server correctly. To test the DB connection, please click <span class="guibutton"><strong>Test Connection</strong></span> button.</p><div class="warning"><h2>Warning</h2><p>If the <span class="guibutton"><strong>Test Connection</strong></span> button was used, make sure that the <span class="guibutton"><strong>Database Password</strong></span> field is still filled, as some browsers lose the data in there. Default password is <span class="emphasis"><em>rhqadmin</em></span>.</p></div></li><li><p>Review the seleceted settings, click <span class="guibutton"><strong>Install Server!</strong></span> and wait for it to complete.</p></li><li><p>Click on <span class="guibutton"><strong>Done! Click here to get started!</strong></span> when the progress bar stops.</p></li></ol></div></li><li><p>Log in (default user/password are: rhqadmin/rhqadmin), it is time to download and install the Agent.</p><p>The Agent is the component where our plugin will be running at. It is responsible for communicating with the managed resource (in this situation, the <acronym class="acronym">JAIN SLEE</acronym> Server) to obtain vital data (eg: availability), metrics, operations execution, etc. and report back to the Server, who will process and display that data.</p><p>To download it, follow these steps:</p><div class="orderedlist"><ol><li><p>Click on <span class="guimenu"><strong>Administration</strong></span> → <span class="guisubmenu"><strong>Download</strong></span>.</p><div class="figure"><a id="d0e607"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/img-jopr_download_menu.png" align="middle" alt="Accessing Download Menu" longdesc="/Users/martins/mobicents-svn/trunk/servers/jain-slee/release/checkout/tools/management-console/docs/jdocbook-mobicents/target/docbook/publish/en-US/html/ld-d0e610.html"/><div class="longdesc-link"><br/><span class="longdesc-link">[<a href="ld-d0e610.html">D</a>]</span></div></div></div><p class="title"><b>Figure 2.1. Accessing Download Menu</b></p></div><br class="figure-break"/></li><li><p>Click on <span class="guilabel"><strong>Download Agent Installer</strong></span> and save it to where you wish to have it installed.</p></li><li><p>In a second terminal console, cd into the directory containing the downloaded jar and install it:</p><pre class="screen">java -jar &lt;agent-download.jar&gt; --install[=&lt;new agent dir&gt;]</pre><p>The optional parameter, <em class="parameter"><code>new agent dir</code></em> indicates where the files will be installed, and defaults to the path where the jar is at.</p></li><li><p>cd into the newly created <span class="emphasis"><em>rhq-agent</em></span> directory and start the Agent by issuing:</p><pre class="screen">bin/rhq-agent.[sh|bat]</pre></li><li><p>Answer the questions asked by the Agent, if any. Default setting should be sufficient.</p></li><li><p>There should be a console with a '&gt; ' prompt. Don't close it, leave it running, it's the agent who will perform all the work.</p></li></ol></div></li></ol></div><p>For more detailed and up to date information, visit the Jopr <a class="ulink" href="http://jboss.org/community/docs/DOC-12828">installation instructions</a>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="install_jslee_plugin"/>2.2.2. Installing the Mobicents <acronym class="acronym">JAIN SLEE</acronym> Plugin</h3></div></div></div><p>Mobicents <acronym class="acronym">JAIN SLEE</acronym> Plugin is the interface between Jopr and Mobicents <acronym class="acronym">JAIN SLEE</acronym>. It is responsible for gathering data from <acronym class="acronym">SLEE</acronym> and transform it to Jopr format. It is an agent plugin, since it runs on the agent side.</p><p>Mobicents <acronym class="acronym">JAIN SLEE</acronym> Plugin, may be installed in two ways:</p><div class="variablelist"><dl><dt><span class="term">Using the GUI</span></dt><dd><p>In the Jopr GUI, in the top menu, head to <span class="guimenu"><strong>Administration</strong></span> → <span class="guisubmenu"><strong>System Configuration</strong></span> → <span class="guimenuitem"><strong>Plugins</strong></span>:</p><div class="figure"><a id="d0e688"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/img-jopr_plugins_menu.png" align="middle" alt="Accessing Plugins Menu" longdesc="/Users/martins/mobicents-svn/trunk/servers/jain-slee/release/checkout/tools/management-console/docs/jdocbook-mobicents/target/docbook/publish/en-US/html/ld-d0e691.html"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="longdesc-link"><br/><span class="longdesc-link">[<a href="ld-d0e691.html">D</a>]</span></div></div></div><p class="title"><b>Figure 2.2. Accessing Plugins Menu</b></p></div><br class="figure-break"/><p>On the <span class="guilabel"><strong>Agent Plugins</strong></span> tab (selected by default), on the bottom of the page, click  <span class="guibutton"><strong>Add...</strong></span>, browse to the Jopr plugin <acronym class="acronym">JAR</acronym> file and select it. It will be listed for upload, as it can be seen in the following figure:</p><div class="figure"><a id="d0e708"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/img-jopr_upload_plugin.png" align="middle" alt="Uploading Plugin" longdesc="/Users/martins/mobicents-svn/trunk/servers/jain-slee/release/checkout/tools/management-console/docs/jdocbook-mobicents/target/docbook/publish/en-US/html/ld-d0e711.html"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="longdesc-link"><br/><span class="longdesc-link">[<a href="ld-d0e711.html">D</a>]</span></div></div></div><p class="title"><b>Figure 2.3. Uploading Plugin</b></p></div><br class="figure-break"/><p>Finally, click the <span class="guibutton"><strong>Upload</strong></span> button and the plugin will be deployed. Click <span class="guibutton"><strong>Scan for Updates</strong></span> and it should be shown in the list as "Mobicents JSLEE Server 2.x".</p><p>If the agent is not running, start it and it will automatically download the new plugin. If it was already running, you should run the following command in it's console to download/update the plugin:</p><pre class="screen">&gt; plugins update</pre></dd><dt><span class="term">Copying the JAR File</span></dt><dd><p>The plugin can be deployed simply by copying it to the right folder, by following these steps:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>Stop the Jopr server and agent if they are running.</p></li><li><p>Copy the mobicents-slee-jopr-as-5-plugin-<span class="emphasis"><em>&lt;version&gt;</em></span>.jar to the jopr-server/jbossas/server/default/deploy/rhq.ear/rhq-downloads/rhq-plugins/ directory, and it will be automatically deployed.</p></li><li><p>Start the Jopr server.</p></li><li><p>Start the Jopr agent.</p></li></ol></div></dd></dl></div><p>After the plugin is installed, the server must be added to the managed resources. Choose <span class="guimenu"><strong>Overview</strong></span> → <span class="guisubmenu"><strong>Auto Discovery Queue</strong></span>:</p><div class="figure"><a id="d0e759"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/img-jopr_auto_discovery_menu.png" align="middle" alt="Accessing Auto Discovery Queue Menu" longdesc="/Users/martins/mobicents-svn/trunk/servers/jain-slee/release/checkout/tools/management-console/docs/jdocbook-mobicents/target/docbook/publish/en-US/html/ld-d0e762.html"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="longdesc-link"><br/><span class="longdesc-link">[<a href="ld-d0e762.html">D</a>]</span></div></div></div><p class="title"><b>Figure 2.4. Accessing Auto Discovery Queue Menu</b></p></div><br class="figure-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Please make sure that the <acronym class="acronym">JAIN SLEE</acronym> Server is running at this time, otherwise it won't be shown under Auto Discovery.</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>JAIN SLEE Server not showing in Auto Discovery?</h2><p>If the <acronym class="acronym">JAIN SLEE</acronym> Server is running but not shown in the list, issue the following commands in th Jopr Agent console:</p><pre class="screen">&gt; plugins update
...

&gt; discovery</pre><p>Back in the  web console, refresh the Auto Discovery view and it should be present!</p></div><p>Check the option referring to JAIN SLEE Server (as in the figure below), and click <span class="guibutton"><strong>IMPORT</strong></span> button.</p><div class="figure"><a id="d0e791"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/img-jopr_import_resources.png" align="middle" alt="Selecting the server to be imported into Jopr." longdesc="/Users/martins/mobicents-svn/trunk/servers/jain-slee/release/checkout/tools/management-console/docs/jdocbook-mobicents/target/docbook/publish/en-US/html/ld-d0e794.html"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="longdesc-link"><br/><span class="longdesc-link">[<a href="ld-d0e794.html">D</a>]</span></div></div></div><p class="title"><b>Figure 2.5. Selecting the server to be imported into Jopr.</b></p></div><br class="figure-break"/><p>Now the server is being can be managed and monitored with Jopr.</p></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="introduction.html"><strong>Prev</strong>Chapter 1. Introduction to Jopr and Mobicents JAI...</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="management.html"><strong>Next</strong>Chapter 3. Managing Mobicents JAIN SLEE with Jopr</a></li></ul></body></html>