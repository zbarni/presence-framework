<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 7. Firing Events from Java EE Applications</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="JAIN SLEE User Guide"/><link rel="up" href="index.html" title="JAIN SLEE User Guide"/><link rel="prev" href="clustering.html" title="Chapter 6. Mobicents JAIN SLEE Clustering"/><link rel="next" href="slee_1_1_extensions.html" title="Chapter 8. JAIN SLEE 1.1 Extensions"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="clustering.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="slee_1_1_extensions.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_connection_factory"/>Chapter 7. Firing Events from Java EE Applications</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="slee_connection_factory.html#slee_connection_factory_intro">7.1. SLEE Connection Factory</a></span></dt><dd><dl><dt><span class="section"><a href="slee_connection_factory.html#local_slee_connection_factory">7.1.1. Local SLEE Connection Factory</a></span></dt><dt><span class="section"><a href="slee_connection_factory.html#remote_slee_connection_factory">7.1.2. Remote SLEE Connection Factory</a></span></dt><dt><span class="section"><a href="slee_connection_factory.html#using-slee-connection-factory">7.1.3. Using SLEE Connection Factory</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_connection_factory_intro"/>7.1. SLEE Connection Factory</h2></div></div></div><p>The JAIN SLEE specification includes an API for interaction with JAIN SLEE container, with the interface <code class="classname">javax.slee.connection.SleeConnectionFactory</code> upfront, which allows external applications, such as an EJB, to create connections to a specific JAIN SLEE instance, and use that to fire events.
    </p><p>JAIN SLEE provides two different implementations of the API, one for access in the same JVM, another for remote access. Both implementations expose the SLEE Connection Factory in the local JNDI tree, thus the same code is used by the application independently of the implementation used.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="local_slee_connection_factory"/>7.1.1. Local SLEE Connection Factory</h3></div></div></div><p>JAIN SLEE container instances always expose the local SLEE Connection Factory in its JVM, which means that an external application running in the same JVM doesn't need any additional tools or setup to use it.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="remote_slee_connection_factory"/>7.1.2. Remote SLEE Connection Factory</h3></div></div></div><p>JAIN SLEE includes a tool, named Remote SLEE Connection Tool, which is a JCA connector that can be deployed in any Java EE application server. Once deployed this connector installs the factory into JNDI, which communicates with the remote SLEE container through RMI.</p><p>Mobicents Remote SLEE Connection Tool is bundled in all Mobicents JAIN SLEE releases, in the tools/remote-slee-connection directory, including its own documentation.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="using-slee-connection-factory"/>7.1.3. Using SLEE Connection Factory</h3></div></div></div><p>Below is example code which retrieves the SLEE Connection Factory and uses it to fire an event into the JAIN SLEE container. The code is the same whether the SLEE container is in the same JVM or not.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;retrieves&nbsp;JNDI&nbsp;context</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">InitialContext</span><span class="java_plain">&nbsp;context&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">InitialContext</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;retrieves&nbsp;the&nbsp;connection&nbsp;factory&nbsp;from&nbsp;JNDI</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SleeConnectionFactory</span><span class="java_plain">&nbsp;factory&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">SleeConnectionFactory</span><span class="java_separator">)</span><span class="java_plain">&nbsp;context</span><span class="java_separator">.</span><span class="java_plain">lookup</span><span class="java_separator">(</span><span class="java_literal">&quot;java:/MobicentsConnectionFactory&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;creates&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;SLEE&nbsp;container</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SleeConnection</span><span class="java_plain">&nbsp;connection&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;factory</span><span class="java_separator">.</span><span class="java_plain">getConnection</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;creates&nbsp;the&nbsp;activity&nbsp;handle&nbsp;which&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;fire&nbsp;the&nbsp;event&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ExternalActivityHandle</span><span class="java_plain">&nbsp;handle&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">createActivityHandle</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;retrieves&nbsp;the&nbsp;event&nbsp;type&nbsp;ID</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">EventTypeID</span><span class="java_plain">&nbsp;eventTypeID&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">getEventTypeID</span><span class="java_separator">(</span><span class="java_literal">&quot;CustomEvent&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;...&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;1.0&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;creates&nbsp;the&nbsp;event&nbsp;object</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CustomEvent</span><span class="java_plain">&nbsp;eventObject&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomEvent</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;fires&nbsp;the&nbsp;event&nbsp;in&nbsp;the&nbsp;remote&nbsp;SLEE&nbsp;container</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">fireEvent</span><span class="java_separator">(</span><span class="java_plain">eventObject</span><span class="java_separator">,</span><span class="java_plain">&nbsp;eventTypeID</span><span class="java_separator">,</span><span class="java_plain">&nbsp;handle</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;closes&nbsp;the&nbsp;connection</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">close</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="clustering.html"><strong>Prev</strong>Chapter 6. Mobicents JAIN SLEE Clustering</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="slee_1_1_extensions.html"><strong>Next</strong>Chapter 8. JAIN SLEE 1.1 Extensions</a></li></ul></body></html>