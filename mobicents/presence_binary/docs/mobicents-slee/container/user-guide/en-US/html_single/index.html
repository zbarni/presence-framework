<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">JAIN SLEE User Guide</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="description" content="The Mobicents Platform is the first and only open source VoIP platform certified for JAIN SLEE 1.1 and SIP Servlets 1.1 compliance. Mobicents serves as a high-performance core for Service Delivery Platforms (SDPs) and IP Multimedia Subsystems (IMSes) by leveraging J2EE to enable the convergence of data and video in Next-Generation Intelligent Network (NGIN) applications. The Mobicents JAIN SLEE is at the heart of the platform, a high-performance, scalable and fault tolerant Java Service Level Execution Environment."/></head><body><div class="book" lang="en-US"><div class="titlepage"><div><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d0e2"/>JAIN SLEE User Guide</h1></div><div><h2 class="subtitle"/></div><div><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors">by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Alexandre</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Mendonça</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Amit</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Bhayani</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Bartosz</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Baranowski</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Douglas</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Silas</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Eduardo</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Martins</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Ivelin</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Ivanov</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Jared</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Morgan</span>, and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Carl-Magnus</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">BjÃ¶rkell</span></div><div class="editors"/><div class="others"/></div></div><div><p class="copyright">Copyright © 2009 Red Hat, Inc.</p></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p><span class="application"><strong>The Mobicents Platform</strong></span> is the first and only open source <acronym class="acronym">VoIP</acronym> platform certified for <acronym class="acronym">JAIN SLEE</acronym> 1.1 and <acronym class="acronym">SIP</acronym> Servlets 1.1 compliance. <span class="application"><strong>Mobicents</strong></span> serves as a high-performance core for Service Delivery Platforms (<acronym class="acronym">SDP</acronym>s) and <acronym class="acronym">IP</acronym> Multimedia Subsystems (<acronym class="acronym">IMS</acronym>es) by leveraging <acronym class="acronym">J2EE</acronym> to enable the convergence of data and video in Next-Generation Intelligent Network (<acronym class="acronym">NGIN</acronym>) applications.</p><p>The <span class="application"><strong>Mobicents</strong></span> <span class="application"><strong>JAIN SLEE</strong></span> is at the heart of the platform, a high-performance, scalable and fault tolerant Java Service Level Execution Environment.</p></div></div></div><hr/></div><div class="toc"><dl><dt><span class="preface"><a href="#preface">Preface</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e121">1. Document Conventions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e131">1.1. Typographic Conventions</a></span></dt><dt><span class="section"><a href="#d0e347">1.2. Pull-quote Conventions</a></span></dt><dt><span class="section"><a href="#d0e366">1.3. Notes and Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e386">2. Provide feedback to the authors!</a></span></dt></dl></dd><dt><span class="chapter"><a href="#introduction">1. Introduction to Mobicents JAIN SLEE</a></span></dt><dt><span class="chapter"><a href="#install">2. Installing Mobicents JAIN SLEE</a></span></dt><dd><dl><dt><span class="section"><a href="#preinstall_requirements_and_prerequisites">2.1. Pre-Install Requirements and Prerequisites</a></span></dt><dd><dl><dt><span class="section"><a href="#hardware_requirements">2.1.1. Hardware Requirements</a></span></dt><dt><span class="section"><a href="#software_prerequisites">2.1.2. Software Prerequisites</a></span></dt></dl></dd><dt><span class="section"><a href="#install_alternatives">2.2. Install Alternatives</a></span></dt><dd><dl><dt><span class="section"><a href="#binary_release">2.2.1. Binary Release</a></span></dt><dt><span class="section"><a href="#binary_release_snapshot">2.2.2. Binary Release Snapshot</a></span></dt><dt><span class="section"><a href="#release_source_building">2.2.3. Release Source Building</a></span></dt><dt><span class="section"><a href="#trunk_source_building">2.2.4. Trunk Source Building</a></span></dt></dl></dd><dt><span class="section"><a href="#uninstall">2.3. Uninstall Mobicents JAIN SLEE</a></span></dt></dl></dd><dt><span class="chapter"><a href="#configuration_and_running">3. Configuring and Running Mobicents JAIN SLEE</a></span></dt><dd><dl><dt><span class="section"><a href="#server_profiles">3.1. Server Profiles</a></span></dt><dt><span class="section"><a href="#running">3.2. Running Mobicents JAIN SLEE</a></span></dt><dd><dl><dt><span class="section"><a href="#starting">3.2.1. Starting</a></span></dt><dt><span class="section"><a href="#stopping">3.2.2. Stopping</a></span></dt></dl></dd><dt><span class="section"><a href="#configuration">3.3. Configuring Mobicents JAIN SLEE</a></span></dt><dd><dl><dt><span class="section"><a href="#event_router_configuration">3.3.1. Event Router Statistics and Configuration</a></span></dt><dt><span class="section"><a href="#timer_facility_configuration">3.3.2. Timer Facility Configuration</a></span></dt><dt><span class="section"><a href="#profiles_configuration">3.3.3. Configuring JAIN SLEE Profiles</a></span></dt><dt><span class="section"><a href="#other_configurations">3.3.4. Other Configurations</a></span></dt><dt><span class="section"><a href="#logging_configuration">3.3.5. Logging Configuration</a></span></dt><dt><span class="section"><a href="#congestion_control_configuration_">3.3.6. Congestion Control Configuration</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#management">4. Managing Mobicents JAIN SLEE</a></span></dt><dd><dl><dt><span class="section"><a href="#management_jmx_agent">4.1. JAIN SLEE JMX Agent</a></span></dt><dt><span class="section"><a href="#management_snmp_agent">4.2. SNMP Agent</a></span></dt><dt><span class="section"><a href="#management_components">4.3. Managing JAIN SLEE Components</a></span></dt><dd><dl><dt><span class="section"><a href="#management_persistent_file_deployer">4.3.1. Persistent Deployable Unit Management</a></span></dt><dt><span class="section"><a href="#management_tools_ant_tasks">4.3.2. Ant Tasks</a></span></dt></dl></dd><dt><span class="section"><a href="#management_consoles">4.4. Management Consoles</a></span></dt><dd><dl><dt><span class="section"><a href="#management_jmx_console">4.4.1. JMX Console</a></span></dt><dt><span class="section"><a href="#management_jon_console">4.4.2. Jopr Console</a></span></dt><dt><span class="section"><a href="#management_twiddle_cli">4.4.3. TWIDDLE CLI</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#logging_traces_and_alarms">5. Logging, Traces and Alarms</a></span></dt><dd><dl><dt><span class="section"><a href="#log4j_service">5.1. Log4j Logging Service</a></span></dt><dd><dl><dt><span class="section"><a href="#global_logging_config">5.1.1. Simplified Global Log4j Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#alarm_facility">5.2. Alarm Facility</a></span></dt><dt><span class="section"><a href="#trace_facility">5.3. Trace Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#tracers_vs_log4j">5.3.1. JAIN SLEE Tracers and Log4j</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#clustering">6. Mobicents JAIN SLEE Clustering</a></span></dt><dd><dl><dt><span class="section"><a href="#container_clustering">6.1. High Availability and Fault Tolerance</a></span></dt><dd><dl><dt><span class="section"><a href="#container_clustering_high_availability_profile">6.1.1. High Availability Mode</a></span></dt><dt><span class="section"><a href="#container_clustering_fault_tolerant_profile">6.1.2. Fault Tolerant Mode</a></span></dt></dl></dd><dt><span class="section"><a href="#container_clustering_fault_tolerant">6.2. Component Redundancy in Fault Tolerant Clusters</a></span></dt><dd><dl><dt><span class="section"><a href="#container_clustering_ft_internal_components">6.2.1. Internal Component Redundancy</a></span></dt><dt><span class="section"><a href="#container_clustering_ft_external_components">6.2.2. External Component Redundancy</a></span></dt></dl></dd><dt><span class="section"><a href="#container_clustering_components_management">6.3. Managing Components in Mobicents JAIN SLEE Cluster</a></span></dt><dt><span class="section"><a href="#clustering_fault_tolerant_ra_api">6.4. Fault Tolerant Resource Adaptor API</a></span></dt><dd><dl><dt><span class="section"><a href="#fault_tolerant_resource_adaptor">6.4.1. The Fault Tolerant Resource Adaptor Object</a></span></dt><dt><span class="section"><a href="#fault_tolerant_resource_adaptor_context">6.4.2. The Fault Tolerant Resource Adaptor Context</a></span></dt></dl></dd><dt><span class="section"><a href="#container_clustering_ra_activity_replication">6.5. Resource Adaptor Activity Replication</a></span></dt></dl></dd><dt><span class="chapter"><a href="#slee_connection_factory">7. Firing Events from Java EE Applications</a></span></dt><dd><dl><dt><span class="section"><a href="#slee_connection_factory_intro">7.1. SLEE Connection Factory</a></span></dt><dd><dl><dt><span class="section"><a href="#local_slee_connection_factory">7.1.1. Local SLEE Connection Factory</a></span></dt><dt><span class="section"><a href="#remote_slee_connection_factory">7.1.2. Remote SLEE Connection Factory</a></span></dt><dt><span class="section"><a href="#using-slee-connection-factory">7.1.3. Using SLEE Connection Factory</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#slee_1_1_extensions">8. JAIN SLEE 1.1 Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#slee_1_1_extensions_sbbcontext">8.1. SbbContext Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_cr">8.2. ChildRelation Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_sbblo">8.3. SbbLocalObject Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_profilecontext">8.4. ProfileContext Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_aci">8.5. ActivityContextInterface Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_library_references">8.6. Library References Extension</a></span></dt><dd><dl><dt><span class="section"><a href="#slee_1_1_ext_library_jar_xml_descriptor_dtd">8.6.1. Extended Library Jar XML Descriptor DTD</a></span></dt><dt><span class="section"><a href="#slee_1_1_ext_library_jar_xml_descriptor_example">8.6.2. Extended Library Jar XML Descriptor Example</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#advanced_topics">9. Advanced Topics</a></span></dt><dd><dl><dt><span class="section"><a href="#classloading">9.1. Class Loading</a></span></dt><dt><span class="section"><a href="#congestion_control">9.2. Congestion Control</a></span></dt><dd><dl><dt><span class="section"><a href="#congestion_control_configuration">9.2.1. Congestion Control Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#jpa_slee_profiles_mapping">9.3. JAIN SLEE 1.1 Profiles JPA Mapping</a></span></dt><dd><dl><dt><span class="section"><a href="#profile_jpa_tables_and_columns">9.3.1. Profile Specification JPA Tables And columns</a></span></dt><dt><span class="section"><a href="#profile_jpa_datasource">9.3.2. Profile Specification JPA Datasource</a></span></dt></dl></dd><dt><span class="section"><a href="#testing_tck">9.4. Testing the JAIN SLEE 1.1 TCK</a></span></dt><dt><span class="section"><a href="#eclipse_ide">9.5. Setting JAIN SLEE Source Code Projects in Eclipse IDE</a></span></dt></dl></dd><dt><span class="appendix"><a href="#jdk-installing_configuring_and_running">A. Java Development Kit (JDK): Installing, Configuring and Running</a></span></dt><dt><span class="appendix"><a href="#jboss_home_setup">B. Setting the JBOSS_HOME Environment Variable</a></span></dt><dt><span class="appendix"><a href="#fault_tolerant_cluster_example">C. Fault Tolerant Clustering - A Concrete Example</a></span></dt><dd><dl><dt><span class="section"><a href="#ft_example_overview">C.1. Example Overview</a></span></dt><dt><span class="section"><a href="#ft_example_step1">C.2. Creating Sbb entities</a></span></dt><dt><span class="section"><a href="#ft_example_step2">C.3. Relaying the Message</a></span></dt></dl></dd><dt><span class="appendix"><a href="#revision_history">D. Revision History</a></span></dt><dt><span class="index"><a href="#d0e3744">Index</a></span></dt></dl></div><div class="preface" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="preface"/>Preface</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e121"/>1. Document Conventions</h2></div></div></div><p>
		This manual uses several conventions to highlight certain words and phrases and draw attention to specific pieces of information.
	</p><p>
		In PDF and paper editions, this manual uses typefaces drawn from the <a class="ulink" href="https://fedorahosted.org/liberation-fonts/">Liberation Fonts</a> set. The Liberation Fonts set is also used in HTML editions if the set is installed on your system. If not, alternative but equivalent typefaces are displayed. Note: Red Hat Enterprise Linux 5 and later includes the Liberation Fonts set by default.
	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e131"/>1.1. Typographic Conventions</h3></div></div></div><p>
			Four typographic conventions are used to call attention to specific words and phrases. These conventions, and the circumstances they apply to, are as follows.
		</p><p>
			<code class="literal">Mono-spaced Bold</code>
		</p><p>
			Used to highlight system input, including shell commands, file names and paths. Also used to highlight key caps and key-combinations. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				To see the contents of the file <code class="filename">my_next_bestselling_novel</code> in your current working directory, enter the <code class="command">cat my_next_bestselling_novel</code> command at the shell prompt and press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</p></blockquote></div><p>
			The above includes a file name, a shell command and a key cap, all presented in Mono-spaced Bold and all distinguishable thanks to context.
		</p><p>
			Key-combinations can be distinguished from key caps by the hyphen connecting each part of a key-combination. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				Press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</p><p>
				Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> to switch to the first virtual terminal. Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F7</strong></span> to return to your X-Windows session.
			</p></blockquote></div><p>
			The first sentence highlights the particular key cap to press. The second highlights two sets of three key caps, each set pressed simultaneously.
		</p><p>
			If source code is discussed, class names, methods, functions, variable names and returned values mentioned within a paragraph will be presented as above, in <code class="literal">Mono-spaced Bold</code>. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				File-related classes include <code class="classname">filesystem</code> for file systems, <code class="classname">file</code> for files, and <code class="classname">dir</code> for directories. Each class has its own associated set of permissions.
			</p></blockquote></div><p>
			<span class="application"><strong>Proportional Bold</strong></span>
		</p><p>
			This denotes words or phrases encountered on a system, including application names; dialogue box text; labelled buttons; check-box and radio button labels; menu titles and sub-menu titles. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				Choose <span class="guimenu"><strong>System &gt; Preferences &gt; Mouse</strong></span> from the main menu bar to launch <span class="application"><strong>Mouse Preferences</strong></span>. In the <span class="guilabel"><strong>Buttons</strong></span> tab, click the <span class="guilabel"><strong>Left-handed mouse</strong></span> check box and click <span class="guibutton"><strong>Close</strong></span> to switch the primary mouse button from the left to the right (making the mouse suitable for use in the left hand).
			</p><p>
				To insert a special character into a <span class="application"><strong>gedit</strong></span> file, choose <span class="guimenu"><strong>Applications &gt; Accessories &gt; Character Map</strong></span> from the main menu bar. Next, choose <span class="guimenu"><strong>Search &gt; Find</strong></span> from the <span class="application"><strong>Character Map</strong></span> menu bar, type the name of the character in the <span class="guilabel"><strong>Search</strong></span> field and click <span class="guibutton"><strong>Next</strong></span>. The character you sought will be highlighted in the <span class="guilabel"><strong>Character Table</strong></span>. Double-click this highlighted character to place it in the <span class="guilabel"><strong>Text to copy</strong></span> field and then click the <span class="guibutton"><strong>Copy</strong></span> button. Now switch back to your document and choose <span class="guimenu"><strong>Edit &gt; Paste</strong></span> from the <span class="application"><strong>gedit</strong></span> menu bar.
			</p></blockquote></div><p>
			The above text includes application names; system-wide menu names and items; application-specific menu names; and buttons and text found within a GUI interface, all presented in Proportional Bold and all distinguishable by context.
		</p><p>
			Note the <span class="guimenu"><strong>&gt;</strong></span> shorthand used to indicate traversal through a menu and its sub-menus. This is to avoid the difficult-to-follow 'Select <span class="guimenuitem"><strong>Mouse</strong></span> from the <span class="guimenu"><strong>Preferences</strong></span> sub-menu in the <span class="guimenu"><strong>System</strong></span> menu of the main menu bar' approach.
		</p><p>
			<code class="command"><em class="replaceable"><code>Mono-spaced Bold Italic</code></em></code> or <span class="application"><strong><em class="replaceable"><code>Proportional Bold Italic</code></em></strong></span>
		</p><p>
			Whether Mono-spaced Bold or Proportional Bold, the addition of Italics indicates replaceable or variable text. Italics denotes text you do not input literally or displayed text that changes depending on circumstance. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				To connect to a remote machine using ssh, type <code class="command">ssh <em class="replaceable"><code>username</code></em>@<em class="replaceable"><code>domain.name</code></em></code> at a shell prompt. If the remote machine is <code class="filename">example.com</code> and your username on that machine is john, type <code class="command">ssh john@example.com</code>.
			</p><p>
				The <code class="command">mount -o remount <em class="replaceable"><code>file-system</code></em></code> command remounts the named file system. For example, to remount the <code class="filename">/home</code> file system, the command is <code class="command">mount -o remount /home</code>.
			</p><p>
				To see the version of a currently installed package, use the <code class="command">rpm -q <em class="replaceable"><code>package</code></em></code> command. It will return a result as follows: <code class="command"><em class="replaceable"><code>package-version-release</code></em></code>.
			</p></blockquote></div><p>
			Note the words in bold italics above  username, domain.name, file-system, package, version and release. Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.
		</p><p>
			Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				When the Apache HTTP Server accepts requests, it dispatches child processes or threads to handle them. This group of child processes or threads is known as a <em class="firstterm">server-pool</em>. Under Apache HTTP Server 2.0, the responsibility for creating and maintaining these server-pools has been abstracted to a group of modules called <em class="firstterm">Multi-Processing Modules</em> (<em class="firstterm">MPMs</em>). Unlike other modules, only one module from the MPM group can be loaded by the Apache HTTP Server.
			</p></blockquote></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e347"/>1.2. Pull-quote Conventions</h3></div></div></div><p>
			Two, commonly multi-line, data types are set off visually from the surrounding text.
		</p><p>
			Output sent to a terminal is set in <code class="computeroutput">Mono-spaced Roman</code> and presented thus:
		</p><pre class="screen">
books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs
</pre><p>
			Source-code listings are also set in <code class="computeroutput">Mono-spaced Roman</code> but are presented and highlighted as follows:
		</p><pre class="programlisting">
package org.jboss.book.jca.ex1;

import javax.naming.InitialContext;

public class ExClient
{
   public static void main(String args[]) 
       throws Exception
   {
      InitialContext iniCtx = new InitialContext();
      Object         ref    = iniCtx.lookup("EchoBean");
      EchoHome       home   = (EchoHome) ref;
      Echo           echo   = home.create();

      System.out.println("Created Echo");

      System.out.println("Echo.echo('Hello') = " + echo.echo("Hello"));
   }
   
}
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e366"/>1.3. Notes and Warnings</h3></div></div></div><p>
			Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
				A note is a tip or shortcut or alternative approach to the task at hand. Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.
			</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>
				Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply. Ignoring Important boxes won't cause data loss but may cause irritation and frustration.
			</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
				A Warning should not be ignored. Ignoring warnings will most likely cause data loss.
			</p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e386"/>2. Provide feedback to the authors!</h2></div></div></div><a id="d0e389" class="indexterm"/><p> If you find a typographical error in this manual, or if you have thought of a way to make this manual better, we would love to hear from you! Please submit a report in the <a class="ulink" href="http://code.google.com/p/mobicents/issues/list">Issue Tracker</a>, against the product <span class="application"><strong>Mobicents JAIN SLEE</strong></span>, or contact the authors.</p><p> When submitting a bug report, be sure to mention the manual's identifier: JAIN_SLEE_User_Guide</p><p> If you have a suggestion for improving the documentation, try to be as specific as possible when describing it. If you have found an error, please include the section number and some of the surrounding text so we can find it easily.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="introduction"/>Chapter 1. Introduction to Mobicents JAIN SLEE</h2></div></div></div><p>JAIN SLEE is the specification for a Java Service Logic and Execution Environment (SLEE) architecture, created in the Java Community Process (JCP) by several individuals and companies, including Red Hat. A SLEE is an application server, or service container, which defines a component model for structuring the logic of communications services as a collection of reusable components, and for combining these components into even more sophisticated services. This model was designed and optimized for event-driven applications.</p><p>In addition to the service component model, the SLEE also defines management interfaces used to administer the container and the service components executing within, and a set of standard facilities, which provide common features, such as timers, traces and alarms, to JAIN SLEE components.</p><p>Mobicents JAIN SLEE is the first and only open source platform certified for JAIN SLEE 1.1 compliance, providing a highly scalable, event-driven application server with a robust component model and a fault tolerant execution environment.</p><div class="figure"><a id="d0e413"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/introduction-slee_and_jee.png" align="middle" alt="Overview of JAIN SLEE"/></div></div><p class="title"><b>Figure 1.1. Overview of JAIN SLEE</b></p></div><br class="figure-break"/><p>Mobicents <acronym class="acronym">JAIN SLEE</acronym> is built on top of the open source award winning JBoss Application Server, which means that Mobicents <acronym class="acronym">JAIN SLEE</acronym> complements <acronym class="acronym">JAIN SLEE</acronym> with Java Enterprise (<acronym class="acronym">JEE</acronym>) 5 container features, allowing strong convergence of different application models, for even feature richer communication services, for instance, the Web and <acronym class="acronym">SIP</acronym> can be combined to achieve a more sophisticated and natural user experience. Mobicents <acronym class="acronym">JAIN SLEE</acronym> inherits quality management features and tools from JBoss Application Server, such as the JMX Console, Jopr Plugins and SNMP Adaptor.</p><div class="figure"><a id="d0e439"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/introduction-platform.png" align="middle" alt="Mobicents Platform"/></div></div><p class="title"><b>Figure 1.2. Mobicents Platform</b></p></div><br class="figure-break"/><p>Mobicents JAIN SLEE can also be complemented with Mobicents <acronym class="acronym">SIP</acronym> Servlets and Mobicents Media Server, providing unique value and integration features not found elsewhere.</p></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="install"/>Chapter 2. Installing Mobicents JAIN SLEE</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#preinstall_requirements_and_prerequisites">2.1. Pre-Install Requirements and Prerequisites</a></span></dt><dd><dl><dt><span class="section"><a href="#hardware_requirements">2.1.1. Hardware Requirements</a></span></dt><dt><span class="section"><a href="#software_prerequisites">2.1.2. Software Prerequisites</a></span></dt></dl></dd><dt><span class="section"><a href="#install_alternatives">2.2. Install Alternatives</a></span></dt><dd><dl><dt><span class="section"><a href="#binary_release">2.2.1. Binary Release</a></span></dt><dt><span class="section"><a href="#binary_release_snapshot">2.2.2. Binary Release Snapshot</a></span></dt><dt><span class="section"><a href="#release_source_building">2.2.3. Release Source Building</a></span></dt><dt><span class="section"><a href="#trunk_source_building">2.2.4. Trunk Source Building</a></span></dt></dl></dd><dt><span class="section"><a href="#uninstall">2.3. Uninstall Mobicents JAIN SLEE</a></span></dt></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="preinstall_requirements_and_prerequisites"/>2.1. Pre-Install Requirements and Prerequisites</h2></div></div></div><p>Ensure that the following requirements have been met before continuing with the install.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="hardware_requirements"/>2.1.1. Hardware Requirements</h3></div></div></div><div class="variablelist"><dl><dt><span class="term">Sufficient Disk Space</span></dt><dd><p>Once unzipped, the JAIN SLEE binary release requires <span class="emphasis"><em>at least</em></span> 300MB of free disk space.  Keep in mind that disk space requirements may change from release to release.</p></dd><dt><span class="term">Anything Java Itself Will Run On</span></dt><dd><p>The Mobicents JAIN SLEE container, and bundled JAIN SLEE components are 100% java. The JAIN SLEE will run on the same hardware that the JBoss Application Server runs on, but it is recommended at least 2GB or 4GB of RAM memory, for 32 or 64 bit Operating Systems.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="software_prerequisites"/>2.1.2. Software Prerequisites</h3></div></div></div><div class="variablelist"><dl><dt><span class="term">JDK 6</span></dt><dd><p>A working installation of the Java Development Kit (<acronym class="acronym">JDK</acronym>) version 6 is required in order to run the Mobicents JAIN SLEE. Note that the JBoss Application Server is a runtime dependency, but comes bundled with the binary distribution.</p><p>For instructions on how to install the JDK, refer to <a class="xref" href="#jdk-installing_configuring_and_running" title="Appendix A. Java Development Kit (JDK): Installing, Configuring and Running">Appendix A, <i>Java Development Kit (JDK): Installing, Configuring and Running</i></a>.</p></dd></dl></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="install_alternatives"/>2.2. Install Alternatives</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">Binary Release</span></dt><dd><p>The binary release is a zip file containing an already built binary release of Mobicents JAIN SLEE</p></dd><dt><span class="term">Release Source Building</span></dt><dd><p>As an alternative to the binary release, it is possible to download a specific release source code and build a binary from it.</p></dd><dt><span class="term">Trunk Source Building</span></dt><dd><p>Similar as the Release Source Building, but done on the trunk (current development) source code.</p></dd><dt><span class="term">Binary Release Snapshot</span></dt><dd><p>The binary release snapshot is a build of the trunk source code done daily and upoaded to a public web site.</p></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="binary_release"/>2.2.1. Binary Release</h3></div></div></div><p>You can download the Binary zip files from <a class="ulink" href="http://sourceforge.net/projects/mobicents/files/Mobicents JAIN SLEE Server">http://sourceforge.net/projects/mobicents/files/Mobicents JAIN SLEE Server</a>.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><p>In this form of installation, simply unzip the downloaded zip file to the directory of your choice on any operating system that supports the zip format.</p><ol class="1"><li><p class="title"><b>Unzip the release file</b></p><p>Unzip the file to extract the archive contents into the location of your choice. You can do this using the JDK jar tool (or any other ZIP extraction tool). In the example below we are assuming you downloaded the zip file was named mobicents-jainslee-2.5.0.FINAL.zip to the /mobicents directory.</p><pre class="programlisting">
				    [usr]$ cd /mobicents
				    [usr]$ jar -xvf mobicents-jainslee-2.5.0.FINAL.zip
					</pre></li><li><p class="title"><b>Setting up JBOSS_HOME Environment Variable</b></p><p> You should now have a directory called mobicents-jainslee-2.5.0.FINAL. Next you need to set your JBOSS_HOME environment variables. This is discussed in <a class="xref" href="#jboss_home_setup" title="Appendix B. Setting the JBOSS_HOME Environment Variable">Appendix B, <i>Setting the JBOSS_HOME Environment Variable</i></a>.</p></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="binary_release_snapshot"/>2.2.2. Binary Release Snapshot</h3></div></div></div><p>You can download the Binary Snapshot zip files from <a class="ulink" href="http://ci.jboss.org/jenkins/view/Mobicents/job/Mobicents-Slee-2.x-Release/">http://ci.jboss.org/jenkins/view/Mobicents/job/Mobicents-Slee-2.x-Release/</a>. The installation is similar to the <a class="xref" href="#binary_release" title="2.2.1. Binary Release">Section 2.2.1, “Binary Release”</a> one.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="release_source_building"/>2.2.3. Release Source Building</h3></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p class="title"><b>Downloading the source code</b></p><div class="important"><h2>Important</h2><p>Subversion is used to manage its source code. Instructions for using Suversion, including install, can be found at <a class="ulink" href="http://svnbook.red-bean.com">http://svnbook.red-bean.com</a></p></div><p>Use SVN to checkout the specific release source, the base URL is http://mobicents.googlecode.com/svn/tags/servers/jain-slee/2.x.y/core/ , then add the specific release version, lets consider 2.5.0.FINAL.</p><pre class="programlisting">[usr]$ svn co http://mobicents.googlecode.com/svn/tags/servers/jain-slee/2.x.y/core/2.5.0.FINAL mobicents-slee-core-2.5.0.FINAL</pre></li><li><p class="title"><b>Building the source code</b></p><div class="important"><h2>Important</h2><p>Apache Ant 1.6 (or higher) and Maven 2.0.9 (or higher) is used to build the release. Instructions for using Ant and Maven2, including install, can be found at <a class="ulink" href="http://ant.apache.org">http://ant.apache.org</a> and <a class="ulink" href="http://maven.apache.org">http://maven.apache.org</a></p></div><p>Use Ant to build the binary.</p><pre class="programlisting">
				    [usr]$ cd mobicents-slee-core-2.5.0.FINAL/release
				    [usr]$ ant
				    </pre><p>Once the process finishes you should have a mobicents-jainslee-2.5.0.FINAL.zip file, installation is the same as for <a class="xref" href="#binary_release" title="2.2.1. Binary Release">Section 2.2.1, “Binary Release”</a>.</p></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="trunk_source_building"/>2.2.4. Trunk Source Building</h3></div></div></div><p>Similar process as for <a class="xref" href="#release_source_building" title="2.2.3. Release Source Building">Section 2.2.3, “Release Source Building”</a>, the only change is the SVN source code URL, which is http://mobicents.googlecode.com/svn/trunk/servers/jain-slee.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="uninstall"/>2.3. Uninstall Mobicents JAIN SLEE</h2></div></div></div><p>To uninstall simply delete the directory containing Mobicents JAIN SLEE.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="configuration_and_running"/>Chapter 3. Configuring and Running Mobicents JAIN SLEE</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#server_profiles">3.1. Server Profiles</a></span></dt><dt><span class="section"><a href="#running">3.2. Running Mobicents JAIN SLEE</a></span></dt><dd><dl><dt><span class="section"><a href="#starting">3.2.1. Starting</a></span></dt><dt><span class="section"><a href="#stopping">3.2.2. Stopping</a></span></dt></dl></dd><dt><span class="section"><a href="#configuration">3.3. Configuring Mobicents JAIN SLEE</a></span></dt><dd><dl><dt><span class="section"><a href="#event_router_configuration">3.3.1. Event Router Statistics and Configuration</a></span></dt><dt><span class="section"><a href="#timer_facility_configuration">3.3.2. Timer Facility Configuration</a></span></dt><dt><span class="section"><a href="#profiles_configuration">3.3.3. Configuring JAIN SLEE Profiles</a></span></dt><dt><span class="section"><a href="#other_configurations">3.3.4. Other Configurations</a></span></dt><dt><span class="section"><a href="#logging_configuration">3.3.5. Logging Configuration</a></span></dt><dt><span class="section"><a href="#congestion_control_configuration_">3.3.6. Congestion Control Configuration</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="server_profiles"/>3.1. Server Profiles</h2></div></div></div><p>Mobicents JAIN SLEE reuses JBoss Application Server server profiles to expose different configurations for different needs:</p><div class="variablelist"><dl><dt><span class="term">Default Profile</span></dt><dd><p>The <span class="application"><strong>default</strong></span> profile is proper for standalone or pure high availability. It provides the best performance per cluster node, with linear scaling, but there is no state replication in the cluster, which means that there is no support for failover, neither there is any kind of state gravitation (one node sending state so another node continues its work.</p></dd><dt><span class="term">All Profile</span></dt><dd><p>The <span class="application"><strong>all</strong></span> profile is proper for more flexible high availability and failover support. Performance per node decreases but the cluster does state replication or gravitation.</p></dd></dl></div><p>Profiles can be selected when starting the server, see <a class="xref" href="#running" title="3.2. Running Mobicents JAIN SLEE">Section 3.2, “Running Mobicents JAIN SLEE”</a> for detailed instructions.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="running"/>3.2. Running Mobicents JAIN SLEE</h2></div></div></div><p>Starting or stopping Mobicents JAIN SLEE is no different than starting or stopping JBoss Application Server</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="starting"/>3.2.1. Starting</h3></div></div></div><p>Once installed, you can run server(s) by executing the run.sh (Unix) or run.bat (Microsoft Windows) startup scripts in the <code class="filename">&lt;install_directory&gt;/bin</code> directory (on Unix or Windows).</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="starting_paramaters"/>3.2.1.1. Starting Parameters</h4></div></div></div><div class="variablelist"><dl><dt><span class="term">Server Profile</span></dt><dd><p>To specify the server profile use <code class="command">-c profile_name</code>, for instance, to use the <span class="application"><strong>all</strong></span> profile then start the server with <code class="command">-c all</code></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>If not specified the <span class="application"><strong>default</strong></span> profile is used.</p></div></dd><dt><span class="term">IP / Host</span></dt><dd><p>To specify the IP/Host which the server binds, use <code class="command">-b IP</code>, for instance, to use the 192.168.0.1 IP then start the server with <code class="command">-b 192.168.0.1</code></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>If not specified then <span class="application"><strong>127.0.0.1</strong></span> is used.</p></div></dd></dl></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="stopping"/>3.2.2. Stopping</h3></div></div></div><p>You can shut down the server(s) you can run server(s) by executing the <code class="command">shutdown.sh -s</code> (Unix) or <code class="command">shutdown.bat -s</code> (Microsoft Windows) scripts in the <code class="filename">&lt;install_directory&gt;/bin</code> directory (on Unix or Windows). Note that if you properly stop the server, you will see the following three lines as the last output in the Unix terminal or Command Prompt:</p><pre class="screen">[Server] Shutdown complete
Shutdown complete
Halting VM</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="configuration"/>3.3. Configuring Mobicents JAIN SLEE</h2></div></div></div><p>JAIN SLEE is configured through an XML descriptor for each <a class="xref" href="#server_profiles" title="3.1. Server Profiles">Section 3.1, “Server Profiles”</a>. The XML file is named <code class="filename">jboss-beans.xml</code> and is located at <code class="filename">$JBOSS_HOME/server/profile_name/deploy/mobicents-slee/META-INF</code>, where <span class="application"><strong>profile_name</strong></span> is the server profile name.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
      This configuration greatly affects performance or correctness of the container behavior. This is for advanced users that know the internals of the container.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="event_router_configuration"/>3.3.1. Event Router Statistics and Configuration</h3></div></div></div><p>The JAIN SLEE Event Router is the module responsible for creating new service instances and delivering events to all interested parties. It is capable of doing the routing of several events in parallel, through the usage of multiple executors, each bound to a different thread.</p><p>The Event Router is also able to account performance and load statistics, indicating the number of activities being assigned or several timings regarding event routing, globally or for each individual executor/thread. Statistics are turned on by default and may be retrieved through the JMX MBean <span class="application"><strong>org.mobicents.slee:name=EventRouterStatistics</strong></span>.</p><p>
  An important sub-module of the Event Router is the Executor Mapper, which is responsible for assigning activities to the available executors. JAIN SLEE includes two different Executor Mappers. The default one takes into account the hashcode of the activity handle when distributing, while the alternative uses a round robin algorithm.
  </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
    In the case of advanced performance tuning, it is advised to try the different implementations available, or even provide a custom one.
    </p></div><p>
  The Executor Mapper is nothing more than an interface: <code class="classname">org.mobicents.slee.container.eventrouter.EventRouterExecutorMapper</code>. To deploy a custom implementation, drop the implementation class or classes, packed in a jar file, in the server profile <code class="filename">/deploy</code> directory.
  </p><p>The whole Event Router is a critical component with respect to the container's performance. Its configuration can be tuned, through an XML file and a JMX MBean.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="event_router_persistent_configuration"/>3.3.1.1. Event Router Persistent Configuration</h4></div></div></div><p>Configuration is done through an XML descriptor for each <a class="xref" href="#server_profiles" title="3.1. Server Profiles">Section 3.1, “Server Profiles”</a>. The XML file is named <code class="filename">jboss-beans.xml</code> and is located at <code class="filename">$JBOSS_HOME/server/profile_name/deploy/mobicents-slee/META-INF</code>, where <span class="application"><strong>profile_name</strong></span> is the server profile name.</p><p>The configuration is exposed a JBoss Microcontainer Bean:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Mobicents.JAINSLEE.EventRouterConfiguration&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee.container.management.jmx.EventRouterConfiguration&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">@org.jboss.aop.microcontainer.aspects.jmx.JMX(name=</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;org.mobicents.slee:name=EventRouterConfiguration&quot;,&nbsp;exposedInterface=</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.mobicents.slee.container.management.jmx.EventRouterConfigurationMBean.class,</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registerDirectly=true)</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eventRouterThreads&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">8</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;collectStats&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;executorMapperClassName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.mobicents.slee.runtime.eventrouter.mapping.ActivityHashingEventRouterExecutorMapper</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><div class="table"><a id="d0e764"/><p class="title"><b>Table 3.1. JAIN SLEE Event Router Bean Configuration</b></p><div class="table-contents"><table summary="JAIN SLEE Event Router Bean Configuration" width="100%" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Property Name</th><th>Property Type</th><th>Description</th></tr></thead><tbody><tr><td>eventRouterThreads</td><td>int</td><td>defines how many executors should be used by the Event Router, each bounds to a different thread</td></tr><tr><td>collectStats</td><td>boolean</td><td>defines if performance and load statistics should be collected, turning this feature off will increase performance</td></tr><tr><td>confirmSbbEntityAttachement</td><td>boolean</td><td>defines if the event router should reconfirm that sbb entities are attached to activity context, before delivering event, this will avoid that a sbb entity handles concurrent events after it detachs, turning this feature off will increase performance</td></tr><tr><td>executorMapperClassName</td><td>Class</td><td>This property defines the implementation class of Executor Mapper used by the Event Router, the one above and default uses the activity handle hashcode to do the mapping, an alternative is <code class="classname">org.mobicents.slee.runtime.eventrouter</code><code class="classname">.mapping.RoundRobinEventRouterExecutorMapper</code>, which uses Round Robin algorithm.</td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="event_router_jmx_configuration"/>3.3.1.2. Event Router JMX Configuration</h4></div></div></div><p>Through JMX, the Event Router module configuration can be changed while the container is running. These configuration changes are not persisted.</p><p>The JMX MBean that can be used to change the Event Router configuration is named <span class="application"><strong>org.mobicents.slee:name=EventRouterConfiguration</strong></span>, and provides getters and setters to change each property defined in the persistent configuration. See <a class="xref" href="#management_jmx_console" title="4.4.1. JMX Console">Section 4.4.1, “JMX Console”</a> for how the JMX Console can be used to use this MBean.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="timer_facility_configuration"/>3.3.2. Timer Facility Configuration</h3></div></div></div><p>The JAIN SLEE Timer Facility is the module responsible for managing SLEE timers, and the number of threads it uses is configurable.</p><p>The Timer Facility configuration can be changed through an XML file and a JMX MBean.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="timer_facility_persistent_configuration"/>3.3.2.1. Timer Facility Persistent Configuration</h4></div></div></div><p>Configuration is done through an XML descriptor for each Mobicents Cluster. The XML file is named <code class="filename">jboss-beans.xml</code> and is located at <code class="filename">{JBOSS_HOME}/server/{profile_name}/deploy/mobicents-slee/META-INF</code></p><p>The configuration is exposed a JBoss Microcontainer Bean:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Mobicents.JAINSLEE.TimerFacilityConfiguration&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee.container.management.jmx.TimerFacilityConfiguration&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">@org.jboss.aop.microcontainer.aspects.jmx.JMX(name=</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;org.mobicents.slee:name=TimerFacilityConfiguration&quot;,exposedInterface=</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.mobicents.slee.container.management.jmx.TimerFacilityConfigurationMBean.class,</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registerDirectly=true)</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;timerThreads&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">4</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><div class="table"><a id="d0e846"/><p class="title"><b>Table 3.2. JAIN SLEE Timer Facility Bean Configuration</b></p><div class="table-contents"><table summary="JAIN SLEE Timer Facility Bean Configuration" width="100%" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Property Name</th><th>Property Type</th><th>Description</th></tr></thead><tbody><tr><td>timerThreads</td><td>int</td><td>defines how many threads should be used by the Timer Facility</td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="timer_facility_jmx_configuration"/>3.3.2.2. Timer Facility JMX Configuration</h4></div></div></div><p>Through JMX the Timer Facility module configuration can be changed with the container running. Note that such configuration changes are not persisted.</p><p>The JMX MBean which can be used to change the Timer Facility configuration is named <span class="application"><strong>org.mobicents.slee:name=TimerFacilityConfiguration</strong></span>, and provides getters and setters to change each property defined in the persistent configuration. The JMX Console can be used to use this MBean, see <a class="xref" href="#management_jmx_console" title="4.4.1. JMX Console">Section 4.4.1, “JMX Console”</a>.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="profiles_configuration"/>3.3.3. Configuring JAIN SLEE Profiles</h3></div></div></div><p>JAIN SLEE Profiles is a component used to store data, usually related with a user and/or service profile. JAIN SLEE maps JAIN SLEE Profiles to a Java Persistence API (<acronym class="acronym">JPA</acronym>) Datasource, through Hibernate.
      </p><p>
      There are two configurations for JAIN SLEE Profiles provided as JBoss Microcontainer Beans:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Mobicents.JAINSLEE.Profiles.JPA.HSQLDBConfig&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee.container.deployment.profile.jpa.Configuration&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistProfiles&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;clusteredProfiles&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateDatasource&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/DefaultDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateDialect&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.dialect.HSQLDialect</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss.jca:service=DataSourceBinding,name=DefaultDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Mobicents.JAINSLEE.Profiles.JPA.PostgreSQLConfig&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee.container.deployment.profile.jpa.Configuration&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistProfiles&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;clusteredProfiles&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateDatasource&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/PostgresDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateDialect&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.dialect.PostgreSQLDialect</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>Configurations can be changed, or new ones can be added. For new ones, ensure that the name attribute of the bean element is unique.</p></div><div class="table"><a id="d0e896"/><p class="title"><b>Table 3.3. JAIN SLEE Profiles Bean Configuration</b></p><div class="table-contents"><table summary="JAIN SLEE Profiles Bean Configuration" width="100%" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Property Name</th><th>Property Type</th><th>Description</th></tr></thead><tbody><tr><td>persistProfiles</td><td>boolean</td><td>If true, profile changes are persisted into the data source.</td></tr><tr><td>clusteredProfiles</td><td>boolean</td><td>If true, then the container is aware there is a shared data source and that updates may be done by other nodes (for example, deletion of a JAIN SLEE profile table).</td></tr><tr><td>hibernateDatasource</td><td>String</td><td>The name of the Java Datasource deployed in the JBoss Application Server.</td></tr><tr><td>hibernateDialect</td><td>String</td><td>The java class name of the hibernate dialect to use, related with the selected datasource.</td></tr></tbody></table></div></div><br class="table-break"/><p>To switch the active configuration simply change the parameter injected in the bean named <span class="application"><strong>Mobicents.JAINSLEE.Container</strong></span>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="other_configurations"/>3.3.4. Other Configurations</h3></div></div></div><p>Other JAIN SLEE runtime configuration is done through the following JBoss Microcontainer Bean:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Mobicents.JAINSLEE.MobicentsManagement&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee.container.management.jmx.MobicentsManagement&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">@org.jboss.aop.microcontainer.aspects.jmx.JMX(</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;org.mobicents.slee:service=MobicentsManagement&quot;,</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exposedInterface=org.mobicents.slee.container.management.</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmx.MobicentsManagementMBean.class,</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registerDirectly=true)</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entitiesRemovalDelay&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;timerThreads&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">8</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;loadClassesFirstFromAS&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><div class="table"><a id="d0e952"/><p class="title"><b>Table 3.4. Other JAIN SLEE Configurations</b></p><div class="table-contents"><table summary="Other JAIN SLEE Configurations" width="100%" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Property Name</th><th>Property Type</th><th>Description</th></tr></thead><tbody><tr><td>entitiesRemovalDelay</td><td>int</td><td>The number of minutes before the container forces the ending of SBB entities from a service being deactivated.</td></tr><tr><td>timerThreads</td><td>int</td><td>The number of threads used by the timer facility.</td></tr></tbody></table></div></div><br class="table-break"/><p>This configuration can be changed with the container running with JMX. Note that such configuration changes are not persisted.</p><p>To change the configuraton, use the JMX MBean named <span class="application"><strong>org.mobicents.slee:service=MobicentsManagement</strong></span>, which provides getters and setters to change each property defined in the persistent configuration that is configurable with the container running. The JMX Console can be used to use this MBean, as described in <a class="xref" href="#management_jmx_console" title="4.4.1. JMX Console">Section 4.4.1, “JMX Console”</a>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="logging_configuration"/>3.3.5. Logging Configuration</h3></div></div></div><p>Logging configuration is documented in section <a class="xref" href="#global_logging_config" title="5.1.1. Simplified Global Log4j Configuration">Section 5.1.1, “Simplified Global Log4j Configuration”</a></p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="congestion_control_configuration_"/>3.3.6. Congestion Control Configuration</h3></div></div></div><p>Congesture Control feature configuration is documented in section <a class="xref" href="#congestion_control_configuration" title="9.2.1. Congestion Control Configuration">Section 9.2.1, “Congestion Control Configuration”</a></p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="management"/>Chapter 4. Managing Mobicents JAIN SLEE</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#management_jmx_agent">4.1. JAIN SLEE JMX Agent</a></span></dt><dt><span class="section"><a href="#management_snmp_agent">4.2. SNMP Agent</a></span></dt><dt><span class="section"><a href="#management_components">4.3. Managing JAIN SLEE Components</a></span></dt><dd><dl><dt><span class="section"><a href="#management_persistent_file_deployer">4.3.1. Persistent Deployable Unit Management</a></span></dt><dt><span class="section"><a href="#management_tools_ant_tasks">4.3.2. Ant Tasks</a></span></dt></dl></dd><dt><span class="section"><a href="#management_consoles">4.4. Management Consoles</a></span></dt><dd><dl><dt><span class="section"><a href="#management_jmx_console">4.4.1. JMX Console</a></span></dt><dt><span class="section"><a href="#management_jon_console">4.4.2. Jopr Console</a></span></dt><dt><span class="section"><a href="#management_twiddle_cli">4.4.3. TWIDDLE CLI</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="management_jmx_agent"/>4.1. JAIN SLEE JMX Agent</h2></div></div></div><p>The JMX Agent exposes all MBeans running in the server, including the ones mandated by the JAIN SLEE 1.1 specification.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>The operations done through the JMX Agent are not kept once the server is shutdown. For instance, if a deployable unit is installed through JMX, and the server is shutdown, once the server is started again the deployable unit will not be installed.</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>By default, the JMX Agent listens to port 1099, and is only available at the host/ip which the server is bound.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="management_snmp_agent"/>4.2. SNMP Agent</h2></div></div></div><p>JBoss Application Server provides an SNMP Agent, which can be used to ...</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>TODO</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="management_components"/>4.3. Managing JAIN SLEE Components</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="management_persistent_file_deployer"/>4.3.1. Persistent Deployable Unit Management</h3></div></div></div><p>
  JAIN SLEE provides a file deployer that greatly simplifies the management of JAIN SLEE deployable unit jars. The deployer:
  </p><div class="itemizedlist"><ul><li><p>
      Handles the installation of enclosed JAIN SLEE components.
      </p></li><li><p>
      Automatically activates and deactivates services contained.
      </p></li><li><p>
      Handles the creation, removal, activation, deactivation, link binding and link unbinding of all Resource Adapter Entities.
      </p></li></ul></div><p>
  All operations are persistent, which means that unlike management done through JMX, these survive server shutdowns.
  </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="management_persistent_du_install"/>4.3.1.1. Persistent Deployable Unit Install</h4></div></div></div><p>To install a deployable unit jar simply copy the file to <code class="filename">$JBOSS_HOME/server/profile_name/deploy/</code>, where <span class="application"><strong>profile_name</strong></span> is the server profile name. Child directories can be used.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="management_persistent_du_uninstall"/>4.3.1.2. Persistent Deployable Unit Uninstall</h4></div></div></div><p>To uninstall a deployable unit jar simply delete the file.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="management_persistent_deployer_additional_behavior"/>4.3.1.3. Beyond Deployable Unit (Un)Install</h4></div></div></div><div class="variablelist"><p>The file deployer provides additional behavior then simply (un)install deployable unit jars, as done through the JAIN SLEE 1.1 DeploymentMBean:</p><dl><dt><span class="term">Service (De)Activation</span></dt><dd><p>All services contained in the deployable unit jar are activated after the install, and deactivated prior to uninstall, or server shutdown.</p></dd><dt><span class="term">Dependencies Management</span></dt><dd><p>The deployer puts the installation process on hold until all of the component's dependencies are installed and activated. When uninstalling, it waits for all of the components which depend on components inside the deployable unit to be uninstalled. After an install or uninstall, the deployer evaluates all operations on hold.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="management_persistent_deployer_deploy-config_extension"/>4.3.1.4. Deploy-Config Extension</h4></div></div></div><p>A deployable unit jar may include a deploy-config.xml file in its <code class="filename">META-INF/</code> directory. This file provides additional management actions for persistent install/uninstall operations:</p><div class="variablelist"><dl><dt><span class="term">Resource Adaptor Entity Management</span></dt><dd><p>It is possible to specify RA entities, and the container will create and activate the RA entities after the deployable unit is installed. During the uninstall process, the container will deactivate and remove those RA entities.</p></dd><dt><span class="term">Resource Adaptor Links Management</span></dt><dd><p>It is possible to specify RA links, and the container will bind those after the deployable unit is installed. When uninstalled, the container will unbind those RA links as well. The links are set for resource adapter entities created in the <code class="filename">deploy-config.xml</code> file.</p></dd></dl></div><p>This file should comply with the following schema:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;&nbsp;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:schema</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;deploy-config&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:sequence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ra-entity&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">maxOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;unbounded&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">minOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:sequence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;property&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xs:string&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xs:string&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;value&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xs:string&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;properties&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:sequence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;property&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">maxOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;unbounded&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">minOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:sequence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;file&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xs:string&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;optional&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ra-entity&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:sequence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;properties&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">maxOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">minOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ra-link&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">maxOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;unbounded&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">minOccurs</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:sequence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;resource-adaptor-id&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xs:string&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entity-name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xs:string&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:element</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ra-link&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xs:attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;xs:string&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:complexType</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">xs:schema</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ra-entity</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">resource-adaptor-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ResourceAdaptorID[name=JainSipResourceAdaptor,vendor=net.java.slee.sip,version=1.2]&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SipRA&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javax.sip.PORT&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.lang.Integer&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5060&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ra-link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SipRA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ra-entity</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>The deploy-config.xml example above defines a resource adaptor entity named <code class="literal">SipRa</code>, to be created for the resource adaptor with id <code class="literal">ResourceAdaptorID[name=JainSipResourceAdaptor, vendor=net.java.slee.sip, version=1.2]</code>, and with a single config property named <code class="literal">javax.sip.PORT</code> of type <code class="literal">java.lang.Integer</code> and with value <code class="literal">5060</code>. Additionally, a resource adaptor link named <code class="literal">SipRa</code> should be bound to the resource adaptor entity.</p><p>After the deployable unit is installed, the resource adaptor entity is created, activated and the resource adaptor link is bound. Before the deployable unit is uninstalled, or the server is shutdown, the link is unbound, then the resource adaptor entity is deactivated, and finally the same resource adaptor entity is removed.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="management_tools_ant_tasks"/>4.3.2. Ant Tasks</h3></div></div></div><p>JAIN SLEE includes some tasks for Apache Ant, which can be used for common management tasks done through <acronym class="acronym">JMX</acronym>, when the container is running. The tasks come bundled in <code class="filename">$JBOSS_HOME/server/default/deploy/mobicents-slee/lib/ant-tasks.jar</code>. To use these, the Ant script must include the following code:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">environment</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;system&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;node&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;default&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jboss.deploy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${system.JBOSS_HOME}/server/default/deploy&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">path</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;project.classpath&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fileset</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dir</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jboss.deploy}/mobicents-slee/lib&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">include</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.jar&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">fileset</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fileset</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dir</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${system.JBOSS_HOME}/client&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">include</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.jar&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">fileset</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">path</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;project.classpath&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">refid</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;project.classpath&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jnpHost&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;127.0.0.1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jnpPort&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1099&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">taskdef</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;slee-management&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">classname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.ant.MobicentsManagementAntTask&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">classpath</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${project.classpath}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>It is important to understand some properties set by the code above:</p><div class="variablelist"><dl><dt><span class="term"><em class="parameter"><code>node</code></em></span></dt><dd><p>This property defines the server configuration profile to be used, for further information about those refer to <a class="xref" href="#server_profiles" title="3.1. Server Profiles">Section 3.1, “Server Profiles”</a>.</p></dd><dt><span class="term"><em class="parameter"><code>jnpHost</code></em></span></dt><dd><p>The host/ip which Mobicents JAIN SLEE is bound.</p></dd><dt><span class="term"><em class="parameter"><code>jnpPort</code></em></span></dt><dd><p>The port which the JMX Agent is listening.</p></dd></dl></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>The property values can be overridden when invoking the Ant script. To do this, use the parameter <em class="parameter"><code>-DpropertyName=propertyValue</code></em>. For example, the server profile can be changed from <span class="application"><strong>default</strong></span> to <span class="application"><strong>all</strong></span> using <em class="parameter"><code>-Dnode=all</code></em>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="management_tools_ant_tasks_slee-management"/>4.3.2.1. SLEE Management Task</h4></div></div></div><p>The <code class="literal">slee-management</code> task allows a script to manage JAIN SLEE deployable units, services and resource adapters. The operations, or sub-tasks, are done through <acronym class="acronym">JMX</acronym>.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;sub-tasks&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>The attributes have the same meaning as the properties listed in the script code to import the tasks here: <a class="xref" href="#management_tools_ant_tasks" title="4.3.2. Ant Tasks">Section 4.3.2, “Ant Tasks”</a>.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_install_du"/>4.3.2.1.1. Install Deployable Unit Sub-Task</h5></div></div></div><p>The <code class="literal">install</code> sub-task installs JAIN SLEE the deployable unit jar pointed by the value of attribute <em class="parameter"><code>url</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">install</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;file:///tmp/my-deployable-unit.jar&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_uninstall_du"/>4.3.2.1.2. Uninstall Deployable Unit Sub-Task</h5></div></div></div><p>The <code class="literal">uninstall</code> sub-task uninstalls JAIN SLEE the deployable unit jar which was installed from the value of attribute <em class="parameter"><code>url</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">uninstall</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;file:///tmp/my-deployable-unit.jar&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_activate_service"/>4.3.2.1.3. Activate Service Sub-Task</h5></div></div></div><p>The <code class="literal">activateservice</code> sub-task activates an already installed JAIN SLEE service, with the id specified by the value of attribute <em class="parameter"><code>componentid</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">activateservice</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">componentid</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ServiceID[name=FooService,vendor=org.mobicents,version=1.0]&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_deactivate_service"/>4.3.2.1.4. Deactivate Service Sub-Task</h5></div></div></div><p>The <code class="literal">deactivateservice</code> sub-task deactivates an already installed JAIN SLEE service, with the id specified by the value of attribute <em class="parameter"><code>componentid</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">deactivateservice</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">componentid</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ServiceID[name=FooService,vendor=org.mobicents,version=1.0]&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_create_ra_entity"/>4.3.2.1.5. Create Resource Adaptor Entity Sub-Task</h5></div></div></div><p>The <code class="literal">createraentity</code> sub-task creates the resource adaptor entity with the name specified by the value of attribute <em class="parameter"><code>entityname</code></em>, for an already installed JAIN SLEE resource adaptor, with the id specified by the value of attribute <em class="parameter"><code>componentid</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">createraentity</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">componentid</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ResourceAdaptorID[name=FooRA,vendor=org.mobicents,version=1.0]&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entityname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FooRA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_remove_ra_entity"/>4.3.2.1.6. Remove Resource Adaptor Entity Sub-Task</h5></div></div></div><p>The <code class="literal">removeraentity</code> sub-task removes the resource adaptor entity with the name specified by the value of attribute <em class="parameter"><code>entityname</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">removeraentity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entityname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FooRA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_activate_ra_entity"/>4.3.2.1.7. Activate Resource Adaptor Entity Sub-Task</h5></div></div></div><p>The <code class="literal">activateraentity</code> sub-task activates the resource adaptor entity with the name specified by the value of attribute <em class="parameter"><code>entityname</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">activateraentity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entityname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FooRA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_deactivate_ra_entity"/>4.3.2.1.8. Deactivate Resource Adaptor Entity Sub-Task</h5></div></div></div><p>The <code class="literal">deactivateraentity</code> sub-task deactivates the resource adaptor entity with the name specified by the value of attribute <em class="parameter"><code>entityname</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">deactivateraentity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entityname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FooRA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_bind_ra_link"/>4.3.2.1.9. Bind Resource Adaptor Link Sub-Task</h5></div></div></div><p>The <code class="literal">bindralinkname</code> sub-task binds the resource adaptor link with the name specified by the value of attribute <em class="parameter"><code>linkname</code></em>, for an already active JAIN SLEE resource adaptor entity, with the name specified by the value of attribute <em class="parameter"><code>entityname</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bindralinkname</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entityname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FooRA&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">linkname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FooRA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="management_tools_ant_tasks_slee-management_unbind_ra_link"/>4.3.2.1.10. Unbind Resource Adaptor Link Sub-Task</h5></div></div></div><p>The <code class="literal">unbindralinkname</code> sub-task unbinds the resource adaptor link with the name specified by the value of attribute <em class="parameter"><code>linkname</code></em>. Example of usage:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">slee-management</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpHost}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jnpport</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jnpPort}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">unbindralinkname</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">linkname</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FooRA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">slee-management</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="management_consoles"/>4.4. Management Consoles</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="management_jmx_console"/>4.4.1. JMX Console</h3></div></div></div><p>JBoss Application Server provides a simple web console that gives quick access to all MBeans registered in the server, which includes the ones defined by the JAIN SLEE 1.1 specification.</p><p>To access the JMX console once the server is running, point a web browser to <code class="literal">http://ip:8080/jmx-console</code>, where <code class="literal">ip</code> is the IP/Host the container is bound. Unless set during start up, the IP/Host will be <code class="literal">127.0.0.1/localhost</code> by default.</p><p>
      MBeans in the domain <code class="literal">javax.slee</code> are all standard JAIN SLEE 1.1 MBeans, while the ones in the domain <code class="literal">org.mobicents.slee</code> are proprietary to Mobicents JAIN SLEE. The following ones are of particular interest:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.mobicents.slee:service=MobicentsManagement</code></span></dt><dd><p>the MBean which can be used to make non persistent changes to the server configuration, in runtime. The operation <code class="literal">dumpContainerState</code> displays a textual snapshot of the server's state, which can be used to quickly look for memory leaks or other debug/profiling related tasks.</p></dd><dt><span class="term"><code class="literal">org.mobicents.slee:name=DeployerMBean</code></span></dt><dd><p>the MBean allows interaction with the persistent deployable unit deployer. The operation <code class="literal">showStatus</code> displays a textual snapshot of the deployers's state, which can be used to quickly find out if there is any deployable unit deployment pending, for instance, due to missing dependencies.</p></dd><dt><span class="term"><code class="literal">org.mobicents.slee:name=CongestionControlConfiguration</code></span></dt><dd><p>the MBean allows changing or retrieving the Congestion Control feature, with the container running. Details are provided in section <a class="xref" href="#congestion_control_configuration" title="9.2.1. Congestion Control Configuration">Section 9.2.1, “Congestion Control Configuration”</a>.</p></dd></dl></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>For further information about JAIN SLEE 1.1 MBeans and their operations refer to the JAIN SLEE 1.1 Specification, all are covered with great detail.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="management_jon_console"/>4.4.2. Jopr Console</h3></div></div></div><p>The JMX Console is simple but the MBeans operations were made considering its invocation by management clients, not people using browsers. Jopr was developed to become Red Hat's Middleware Administration Tool, providing an unified interface and extensible model, to be used to control, monitor and manage servers individually, and clusters.</p><p>Mobicents JAIN SLEE binary release includes a Jopr Console in <code class="filename">tools/management-console</code>, with standalone documentation.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="management_twiddle_cli"/>4.4.3. <code class="literal">TWIDDLE</code> <acronym class="acronym">CLI</acronym></h3></div></div></div><p>Both, <acronym class="acronym">JMX</acronym> Console and  Jopr Console, are graphic(web) based tools. Some deployments may require command line access to Mobicents <acronym class="acronym">SLEE</acronym>.
			To aid such cases, Mobicents offers <code class="literal">TWIDDLE</code> based <acronym class="acronym">CLI</acronym>. It allows to manage single instance (remote or local) of Mobicents <acronym class="acronym">SLEE</acronym> server. </p><p>Mobicents JAIN SLEE binary release includes a <code class="literal">TWIDDLE</code> <acronym class="acronym">CLI</acronym> in <code class="filename">tools/twiddle</code>, with standalone documentation.</p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="logging_traces_and_alarms"/>Chapter 5. Logging, Traces and Alarms</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#log4j_service">5.1. Log4j Logging Service</a></span></dt><dd><dl><dt><span class="section"><a href="#global_logging_config">5.1.1. Simplified Global Log4j Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#alarm_facility">5.2. Alarm Facility</a></span></dt><dt><span class="section"><a href="#trace_facility">5.3. Trace Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#tracers_vs_log4j">5.3.1. JAIN SLEE Tracers and Log4j</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="log4j_service"/>5.1. Log4j Logging Service</h2></div></div></div><p>In Mobicents JAIN SLEE <code class="literal">Apache log4j</code> is used for logging. If you are not familiar with the log4j package and would like to use it in your applications, you can read more about it at the <a class="ulink" href="http://jakarta.apache.org/log4j/">Jakarta web site</a>.</p><p>Logging is controlled from a central <code class="filename">conf/jboss-log4j.xml</code> file, in each server configuration profile. This file defines a set of appenders specifying the log files, what categories of messages should go there, the message format and the level of filtering. By default, in Mobicents produces output to both the console and a log file (<code class="filename">log/server.log</code>).</p><p>There are 6 basic log levels used: TRACE, DEBUG, INFO, WARN, ERROR and FATAL. </p><p>Logging is organized in categories and appenders. Appenders control destination of log entries. Different appenders differ in configuration, however each supports threshold. Threshold filters log entries based on their level. Threshold set to WARN will allow log entry to pass into appender if its level is WARN, ERROR or FATAL, other entries will be discarded. For more details on appender configuration please refer to its documentation or java doc.</p><p>The logging threshold on the console is INFO, by default.  In contrast, there is no threshold set for the server.log file, so all generated logging messages are  logged there. </p><p> Categories control level for loggers and its children, for details please refer to log4j manual. </p><p>By default  Mobicents JAIN SLEE inherits level of INFO from root logger. To make platform add more detailed logs, file             <code class="filename">conf/jboss-log4j.xml</code> has to be altered. Explicit category definition for Mobicents JAIN SLEE looks like:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">category</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">priority</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;INFO&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">category</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>This limits the level of logging to INFO for all Mobicents JAIN SLEE classes. It is possible to declare more categories with different level, to provide logs with greater detail.</p><p>For instance, to provide detailed information on Mobicents JAIN SLEE transaction engine in separate log file(<code class="filename">txmanager.log</code>), file   <code class="filename">conf/jboss-log4j.xml</code> should contain entries as follows:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">appender</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;TXMANAGER&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.logging.appender.RollingFileAppender&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">errorHandler</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.logging.util.OnlyOnceErrorHandler&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;File&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jboss.server.home.dir}/log/txmanager.log&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Append&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MaxFileSize&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500KB&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MaxBackupIndex&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">layout</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.apache.log4j.PatternLayout&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ConversionPattern&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;%d&nbsp;%-5p&nbsp;[%c]&nbsp;%m%n&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">layout</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">appender</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">category</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee.runtime.transaction&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">priority</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;DEBUG&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">appender-ref</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;TXMANAGER&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">category</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>This creates a new file appender and specifies that it should be used by the logger (or category) for the package org.mobicents.slee.runtime.transaction.</p><p>The file appender is set up to produce a new log file every day rather than producing a new one every time you restart the server or writing to a single file indefinitely. The current log file is txmanager.log. Older files have the date they were written added to their filenames.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="global_logging_config"/>5.1.1. Simplified Global Log4j Configuration</h3></div></div></div><p>Besides manual logging configuration, described previously, Mobicents JAIN SLEE also exposes management operations that greatly simplify such configuration, allowing the administrator to select through predefined and complete logging configuration presets. Such operations are available in MBean named <code class="filename">org.mobicents.slee%3Aservice%3DMobicentsManagement</code>, and the available presets are:</p><div class="variablelist"><dl><dt><span class="term">Level</span></dt><dd><div class="itemizedlist"><ul><li><p>DEFAULT: Regular logging, at INFO level, displaying most user-related messages;</p></li><li><p>DEBUG: More verbose logging, mostly using DEBUG/TRACE level, displaying message of interest for developers;</p></li><li><p>PRODUCTION: Low verbosity and async logging, mostly in WARN level, for systems in production so that logging does impact performance.</p></li></ul></div></dd></dl></div><p>The available management operations are:</p><div class="variablelist"><dl><dt><span class="term">JMX Operation</span></dt><dd><div class="itemizedlist"><ul><li><p>getLoggingConfiguration: retrieves what is the current logging configuration;</p></li><li><p>switchLoggingConfiguration: allows switching to a different configuration preset;</p></li><li><p>setLoggingConfiguration: used to upload a complete logging configuration.</p></li></ul></div></dd></dl></div><p>Custom presets can be easily deployed in the application server too. Simply name the configuration file as <code class="filename">jboss-log4j.xml.PRESET_NAME</code>, where <code class="literal">PRESET_NAME</code> should be unique preset name, and copy it to directory <code class="filename">$JBOSS_HOME/server/profile_name/deploy/mobicents-slee/log4j-templates</code>, where <span class="application"><strong>profile_name</strong></span> is the server profile name.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>These procedures changes the whole JBoss Application Server Platform logging configuration, so it will affect also logging for other running applications besides the JAIN SLEE container.</p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="alarm_facility"/>5.2. Alarm Facility</h2></div></div></div><p>The <code class="literal">JAIN SLEE Alarm Facility</code> is used by SBBs, Resource Adaptors, and Profiles to request the SLEE to raise or clear alarms. If a request is made to raise an alarm and the identified alarm has not already been raised, the alarm is raised and a corresponding alarm notification is generated by the <code class="literal">AlarmMBean</code>. If a request is made to clear an alarm and the identified alarm is currently raised, the alarm is cleared and a corresponding alarm notification is generated by the <code class="literal">AlarmMBean</code>.</p><p>Alarm notifications are intended for consumption by management clients external to the SLEE. The management client is responsible for registering to receive alarm notifications generated by the Alarm Facility through the external management interface of the <code class="literal">Alarm Facility</code>. The management client may optionally provide notification filters so that only the alarm notifications that the management client would like to receive are transmitted to the management client.</p><p>For further information on how to use <code class="literal">JAIN SLEE Alarm Facility</code> and receive JMX notifications refer to the JAIN SLEE 1.1 Specification.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="trace_facility"/>5.3. Trace Facility</h2></div></div></div><p>Notification sources such as SBBs, Resource Adaptors, Profiles, and SLEE internal components can use the <code class="literal">Trace Facility</code> to generate trace messages intended for consumption by external management clients. Management clients register to receive trace messages generated by the <code class="literal">Trace Facility</code> through the external management interface (MBean). Filters can be applied, in a similar way as in case of Alarms.</p><p>Within the SLEE, notification sources use a <code class="literal">tracer</code> to emit trace messages. A tracer is a named entity. Tracer names are case-sensitive and follow the Java hierarchical naming conventions. A tracer is considered to be an ancestor of another tracer if its name followed by a dot is a prefix of the descendant tracer’s name. A tracer is considered to be a parent of a tracer if there are no ancestors between itself and the descendant tracer. For example, the tracer named <code class="literal">com</code> is the parent tracer of the tracer named <code class="literal">com.foo</code> and an ancestor of the tracer named <code class="literal">com.foo.bar</code>.</p><p>All tracers are implicitly associated with a notification source, which identifies the object in the SLEE that is emitting the trace message and is included in trace notifications generated by the <code class="literal">Trace MBean</code> on behalf of the tracer. For instance, an SBB notification source is composed by the SBB id and the Service id.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>Multiple notification sources may have tracers with same name in SLEE. Comparing with common logging frameworks, this would mean that the notification source would be part of the log category or name.</p></div><p>For further information on how to use <code class="literal">JAIN SLEE Trace Facility</code> and receive JMX notifications refer to the JAIN SLEE 1.1 Specification.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="tracers_vs_log4j"/>5.3.1. JAIN SLEE Tracers and Log4j</h3></div></div></div><p>Mobicents JAIN SLEE Tracers additionally log messages to <span class="application"><strong>Apache Log4j</strong></span>, being the log4j category, for notification source <code class="literal">X</code>, defined as <code class="literal">javax.slee.</code> concatenated with the <code class="literal">X.toString()</code>.</p><p>For instance, the full log4j logger <code class="literal">name</code> for tracer named <code class="literal">GoogleTalkBotSbb</code>, of sbb notification source with <code class="literal">SbbID[name=GoogleTalkBotSbb,vendor=mobicents,version=1.0]</code> and <code class="literal">ServiceID[name=GoogleTalkBotService,vendor=mobicents,version=1.0]</code>, would be <code class="literal">javax.slee.SbbNotification[service=ServiceID[name=GoogleTalkBotService, vendor=mobicents,version=0.1], sbb=SbbID[name=GoogleTalkBotSbb,vendor=mobicents, version=0.1]].GoogleTalkBotSbb</code> (without the spaces or breaks), which means a log4j category defining its level as <code class="literal">DEBUG</code> could be:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">category</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javax.slee.SbbNotification[service=ServiceID[name=GoogleTalkBotService,</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;vendor=mobicents,version=0.1],sbb=SbbID[name=GoogleTalkBotSbb,</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;vendor=mobicents,version=0.1]]&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">priority</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;DEBUG&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">category</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>The relation of JAIN SLEE <code class="literal">tracers</code> and log4j <code class="literal">loggers</code> goes beyond log4j showing tracer's messages, changing the tracer's log4j logger <code class="literal">effective level</code> changes the tracer level in SLEE, and vice-versa. Since JAIN SLEE tracer levels differ from log4j logger levels a mapping is needed:</p><div class="table"><a id="d0e1665"/><p class="title"><b>Table 5.1. Mapping JAIN SLEE Tracer Levels with Apache Log4j Logger Levels</b></p><div class="table-contents"><table summary="Mapping JAIN SLEE Tracer Levels with Apache Log4j Logger Levels" width="100%" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Tracer Level</th><th>Logger Level</th></tr></thead><tbody><tr><td>OFF</td><td>OFF</td></tr><tr><td>SEVERE</td><td>ERROR</td></tr><tr><td>WARNING</td><td>WARN</td></tr><tr><td>INFO</td><td>INFO</td></tr><tr><td>CONFIG</td><td>INFO</td></tr><tr><td>FINE</td><td>DEBUG</td></tr><tr><td>FINER</td><td>DEBUG</td></tr><tr><td>FINEST</td><td>TRACE</td></tr></tbody></table></div></div><br class="table-break"/></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="clustering"/>Chapter 6. Mobicents JAIN SLEE Clustering</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#container_clustering">6.1. High Availability and Fault Tolerance</a></span></dt><dd><dl><dt><span class="section"><a href="#container_clustering_high_availability_profile">6.1.1. High Availability Mode</a></span></dt><dt><span class="section"><a href="#container_clustering_fault_tolerant_profile">6.1.2. Fault Tolerant Mode</a></span></dt></dl></dd><dt><span class="section"><a href="#container_clustering_fault_tolerant">6.2. Component Redundancy in Fault Tolerant Clusters</a></span></dt><dd><dl><dt><span class="section"><a href="#container_clustering_ft_internal_components">6.2.1. Internal Component Redundancy</a></span></dt><dt><span class="section"><a href="#container_clustering_ft_external_components">6.2.2. External Component Redundancy</a></span></dt></dl></dd><dt><span class="section"><a href="#container_clustering_components_management">6.3. Managing Components in Mobicents JAIN SLEE Cluster</a></span></dt><dt><span class="section"><a href="#clustering_fault_tolerant_ra_api">6.4. Fault Tolerant Resource Adaptor API</a></span></dt><dd><dl><dt><span class="section"><a href="#fault_tolerant_resource_adaptor">6.4.1. The Fault Tolerant Resource Adaptor Object</a></span></dt><dt><span class="section"><a href="#fault_tolerant_resource_adaptor_context">6.4.2. The Fault Tolerant Resource Adaptor Context</a></span></dt></dl></dd><dt><span class="section"><a href="#container_clustering_ra_activity_replication">6.5. Resource Adaptor Activity Replication</a></span></dt></dl></div><p>JAIN SLEE supports clustering, whether it is simple high availability (<acronym class="acronym">HA</acronym>) or complete fault tolerance (<acronym class="acronym">FT</acronym>) support. This is achieved through the replication of the container state. The Mobicents JAIN SLEE implementation also exposes a clustering extension <acronym class="acronym">API</acronym> for Resource Adaptors components, which live outside the container.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="container_clustering"/>6.1. High Availability and Fault Tolerance</h2></div></div></div><p>The used JAIN SLEE clustering mode is defined by the selected server profile:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>JAIN SLEE reuses the JBoss Application Server clustering framework, and if all nodes of a cluster are in the same network then the underlying JBoss Application Server clustering will automatically handle the discovery of new cluster nodes and join these to the cluster. For more complicated setups, refer to the JBoss Application Server clustering documentation.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="container_clustering_high_availability_profile"/>6.1.1. High Availability Mode</h3></div></div></div><p>High availability mode provides no clustering functionality per say. The mode is useful when deploying for example single node, non-replicated or hot-cold configurations. In this mode all clustering needs to be explicitly done by the developer where applicable. In this sense, <acronym class="acronym">HA</acronym> mode is not a clustered mode.</p><p>The <code class="literal">default</code> server profile is used to start the server in <acronym class="acronym">HA</acronym> mode.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="container_clustering_fault_tolerant_profile"/>6.1.2. Fault Tolerant Mode</h3></div></div></div><p>The fault tolerant mode is a fully clustered mode with state replication. An FT cluster can be viewed as one virtual container that extend over all the JAIN SLEE nodes that are active in the cluster. All activity context and Sbb entity data is replicated across the cluster nodes and is hence fully redundant. Events are not failed over, due to performance constraints, which means that an event fired and not yet routed will be lost if its cluster node fails.</p><p>The <code class="literal">all</code> server profile is used to start the server in <acronym class="acronym">FT</acronym> mode.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="container_clustering_fault_tolerant"/>6.2. Component Redundancy in Fault Tolerant Clusters</h2></div></div></div><p>The fault tolerant clustering mode provides clustering for most of the JAIN SLEE components. JAIN SLEE components can be divided into internal and external components. Internal components are logically contained by the JAIN SLEE container, and external components are at least partly outside the container.</p><p>For a concrete example of how the container behaves in <acronym class="acronym">FT</acronym> mode, see <a class="xref" href="#fault_tolerant_cluster_example" title="Appendix C. Fault Tolerant Clustering - A Concrete Example">Appendix C, <i>Fault Tolerant Clustering - A Concrete Example</i></a>.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="container_clustering_ft_internal_components"/>6.2.1. Internal Component Redundancy</h3></div></div></div><p>Internal SLEE components are components that are completely inside the JAIN SLEE container. This group of components include <acronym class="acronym">SBB</acronym> entities, internal activities, events and timers. With the exception of events, all internal components will be fully redundant in a <acronym class="acronym">FT</acronym> JAIN SLEE configuration.</p><p><acronym class="acronym">SBB</acronym> entities are fully replicated. <acronym class="acronym">SBB</acronym> entities are always serialized and saved by the container, regardless of the clustering profile. In an <acronym class="acronym">FT</acronym> environment the container will replicate this serialized state to other nodes in the cluster so that it can be retrieved if the node fails or if the <acronym class="acronym">SBB</acronym> entity is processed in another node. All <acronym class="acronym">SBB</acronym> entities will hence be accessible by any node in the cluster at any given time.</p><p>Timers are fully replicated. Timers created in a given node will be executed in that same node. If the node leaves the cluster, all active timers from that node are recreated and run in another node.</p><p>Activity context interfaces (<acronym class="acronym">ACI</acronym>), as well as activity handles are fully replicated. The <acronym class="acronym">ACI</acronym>s for all activities are replicated within a fault tolerant cluster. However, the activity object is not replicated by default and needs to be handled by the resource adaptor that owns the activity in question if replication is required. The activity objects for all internal activities, e.g. null activities, profile table activities and service activities, are fully replicated.</p><p>Events are not replicated because of performance constraints. Hence, all events fired in a node is routed only in that node. However, if an event is fired in one node, and an <acronym class="acronym">SBB</acronym> entity created in another node has attached to that <acronym class="acronym">ACI</acronym>, the <acronym class="acronym">SBB</acronym> entity will be retrieved in the node that fired the event and the event will be delivered to it. Hence, even though the event is fired in a single node, the effects will be cluster-wide. Because the events are not replicated, any event currently being routed in a node that fails, will be lost.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="container_clustering_ft_external_components"/>6.2.2. External Component Redundancy</h3></div></div></div><p>External JAIN SLEE components are components that are on the border between the SLEE container and the outside environment. This group of components include resource adaptors and external activities, neither of which are replicated by default.</p><p>The Resource adaptors may use the Fault Tolerant Resource Adaptor API extension of the JAIN SLEE 1.1 specification in order to be cluster-aware. Refer to the <a class="xref" href="#clustering_fault_tolerant_ra_api" title="6.4. Fault Tolerant Resource Adaptor API">Section 6.4, “Fault Tolerant Resource Adaptor API”</a> and <a class="xref" href="#container_clustering_ra_activity_replication" title="6.5. Resource Adaptor Activity Replication">Section 6.5, “Resource Adaptor Activity Replication”</a> sections for more information on how to achieve resource adaptor and activity object redundancy.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="container_clustering_components_management"/>6.3. Managing Components in Mobicents JAIN SLEE Cluster</h2></div></div></div><p>JAIN SLEE clustering does not require special components management. Components can be deployed and undeployed in all cluster modes, including fault tolerant setups, and the cluster will handle the operation correctly. However, there are certain behaviours in fault tolerance setups to be aware of:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">Service Activation</code></span></dt><dd><p>
              JAIN SLEE Service started events are only fired on the first cluster node started.
              </p></dd><dt><span class="term"><code class="literal">Service Deactivation</code></span></dt><dd><p>
              Only the last node will force the removal of the service's <acronym class="acronym">SBB</acronym> entities.
              </p></dd><dt><span class="term"><code class="literal">Resource Adaptor Entity Deactivation</code></span></dt><dd><p>
              Only the last node will force the removal of all its activities.
              </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="clustering_fault_tolerant_ra_api"/>6.4. Fault Tolerant Resource Adaptor API</h2></div></div></div><p>
		JAIN SLEE Resource Adaptors exist on the boundary between the
		container and the underlying protocol. The specification contract
		requires the
		<acronym class="acronym">RA</acronym>
		object to implement the
		<code class="literal">javax.slee.resource.ResourceAdaptor</code>
		interface. This interface defines callbacks, which SLEE uses to
		interact with the
		<acronym class="acronym">RA</acronym>
		, including one to provide the
		<code class="literal">javax.slee.resource.ResourceAdaptorContext</code>
		object. The Resource Adaptor Context provides
		<acronym class="acronym">RA</acronym>
		object facilities to interact with SLEE.
	</p><p>
	The JAIN SLEE 1.1 RA API is a major milestone, standardizing RA and JSLEE contract. However, it misses an API for clustering, which is
	critical for a RA deployed in a clustered JAIN SLEE environment. The JAIN SLEE 1.1 contract does not define any fault tolerant data source
	nor cluster state callbacks.
  </p><p>
	The
	<span class="application"><strong>Fault Tolerant RA API</strong></span>
	extends the JAIN SLEE 1.1 RA
	<acronym class="acronym">API</acronym>
	, providing missing features related to clustering. An effort has been made keep the API similar to the standard RA contract, so that
	anyone who has developed a JAIN SLEE 1.1 RA is able to easily use the proprietary API extension.
	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="fault_tolerant_resource_adaptor"/>6.4.1. The Fault Tolerant Resource Adaptor Object</h3></div></div></div><div class="variablelist"><p>
				The core of the Fault Tolerant RA API is the
				<code class="literal">org.mobicents.slee.resource.cluster.FaultTolerantResourceAdaptor
				</code>
				interface. It is intended to be used instead of the
				<code class="literal">javax.slee.resource.ResourceAdaptor</code>
				interface from the JAIN SLEE 1.1 Specification.
			</p><p>
				The FaultTolerant interface provides three new callback methods
				used by
				the container:
      </p><dl><dt><span class="term">
					<code class="literal">setFaultTolerantResourceAdaptorContext(FaultTolerantResourceAdaptorContext
						context)</code>
				</span></dt><dd><p>
						This method provides the RA with the
						<code class="literal">org.mobicents.slee.resource.cluster.FaultTolerantResourceAdaptorContext
						</code>
						object, which gives access to facilities related with the cluster.
						This method is invoked by SLEE after invoking
						<code class="literal">raConfigure(ConfigProperties properties)</code>
						from JAIN SLEE 1.1 specs.
					</p></dd><dt><span class="term">
					<code class="literal">unsetFaultTolerantResourceAdaptorContext()</code>
				</span></dt><dd><p>
						This method indicates that the RA should remove any references it
						has to the FaultTolerantResourceAdaptorContext, as it is not valid
						anymore. The method is invoked by SLEE before invoking
						<code class="literal">unsetResourceAdaptorContext()</code>
						from JAIN SLEE 1.1 specs.
					</p></dd><dt><span class="term">
					<code class="literal">failOver(K key)</code>
				</span></dt><dd><p>Callback from SLEE when the local RA was selected to recover
						the state for a replicated data key, which was owned by a cluster
						member that failed. The RA may then restore any runtime resources
						associated with such data.</p></dd><dt><span class="term">
					<code class="literal">dataRemoved(K key)</code>
				</span></dt><dd><p>Optional callback from SLEE when the replicated data key was
						removed from the cluster, this may be helpful when the local RA
						maintains local state.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="fault_tolerant_resource_adaptor_context"/>6.4.2. The Fault Tolerant Resource Adaptor Context</h3></div></div></div><p>
	The clustered RA context follows the contract of JAIN SLEE 1.1 specification interface
	<code class="literal">javax.slee.resource.ResourceAdaptorContext</code>
	. It gives access to facilities that the RA may use when run in a clustered environment.
		</p><p>
			The cluster contract is defined in:
			<code class="literal">org.mobicents.slee.resource.cluster.FaultTolerantResourceAdaptorContext
			</code>
			. It provides critical information, such as if SLEE is running in
			local mode (not clustered), if it is the head/master member of the
			cluster, and what the members of the cluster are.
		</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="fault_tolerant_resource_adaptor_context_replicated_data"/>6.4.2.1. The Fault Tolerant Resource Adaptor Replicated Data Sources
			</h4></div></div></div><p>The Fault Tolerant Resource Adaptor Context provides two data
				sources to replicate data in cluster:</p><div class="variablelist"><dl><dt><span class="term">
						<code class="literal">ReplicatedData</code>
					</span></dt><dd><p>A container for serializable data, which is replicated in
							the SLEE cluster, but don't require any failover.</p></dd><dt><span class="term">
						<code class="literal">ReplicatedDataWithFailover</code>
					</span></dt><dd><p>
							A
							<code class="literal">ReplicatedData</code>
							which requires fail over callbacks, this means, that for all data
							stored here, when a cluster member goes down, the SLEE in another
							cluster member will invoke the
							<code class="literal">failOver(Key k)</code>
							callback in the Fault Tolerant RA object.
						</p></dd></dl></div><p>
				When retrieved from the context through a boolean parameter, both
				types of
				<code class="literal">ReplicatedData</code>
				can activate the callback on the
				<code class="literal">FaultTolerantResourceAdaptor</code>
				which indicates that a specific data was removed from the cluster
				remotely.
			</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="fault_tolerant_resource_adaptor_context_timer"/>6.4.2.2. The Fault Tolerant Resource Adaptor Timer
			</h4></div></div></div><p>The standard Resource Adaptor Context provides a <code class="literal">java.util.Timer</code>, which can be used by the Resource Adaptor to schedule the execution of tasks, the Fault Tolerant Resource Adaptor Context provides <code class="literal">org.mobicents.slee.resource.cluster.FaultTolerantTimer</code>, an alternative scheduler which is able to fail over tasks scheduled.</p><p>The Fault Tolerant Timer has an interface that resembles the JDK's <code class="literal">ScheduledExecutorService</code>, with two fundamental changes to allow a proper interaction in a cluster environment:</p><div class="variablelist"><dl><dt><span class="term">
						<code class="literal">Task Interface</code>
					</span></dt><dd><p>Instead of relying on pure <code class="literal">Runnable</code> tasks, tasks must follow a specific interface <code class="literal">FaultTolerantTimerTask</code>, to ensure that the timer is able to replicate the task's data, and failover the task in any cluster node.</p></dd><dt><span class="term">
						<code class="literal">Task Cancellation</code>
					</span></dt><dd><p>
							Cancellation of task is done through the Timer interface, not through <code class="literal">ScheduledFuture</code> objects, this allows the operation to be easily done in any cluster node.
						</p></dd></dl></div><p>The Fault Tolerant Timer interface:</p><div class="variablelist"><dl><dt><span class="term">
						<code class="literal">cancel(Serializable taskID)</code>
					</span></dt><dd><p>Requests the cancellation of the FT Timer Task with the specified ID.</p></dd><dt><span class="term">
						<code class="literal">configure(FaultTolerantTimerTaskFactory taskFactory, int threads)</code>
					</span></dt><dd><p>Configures the fault tolerant timer, specifying the timer task factory and the number of threads the timer uses to execute tasks.</p></dd><dt><span class="term">
						<code class="literal">isConfigured()</code>
					</span></dt><dd><p>Indicates if the timer is configured.</p></dd><dt><span class="term">
						<code class="literal">schedule(FaultTolerantTimerTask task, long delay, TimeUnit unit)</code>
					</span></dt><dd><p>Creates and executes a one-shot action that becomes enabled after the given delay.</p></dd><dt><span class="term">
						<code class="literal">scheduleAtFixedRate(FaultTolerantTimerTask task,
			long initialDelay, long period, TimeUnit unit)</code>
					</span></dt><dd><p>Creates and executes a periodic action that becomes enabled first after the given initial delay, and subsequently with the given period; that is executions will commence after <code class="literal">initialDelay</code> then <code class="literal">initialDelay+period</code>, then <code class="literal">initialDelay + 2 * period</code>, and so on. If any execution of the task encounters an exception, subsequent executions are suppressed. Otherwise, the task will only terminate via cancellation or termination of the executor. If any execution of this task takes longer than its period, then subsequent executions may start late, but will not concurrently execute.</p></dd><dt><span class="term">
						<code class="literal">scheduleWithFixedDelay(FaultTolerantTimerTask task,
			long initialDelay, long delay, TimeUnit unit)</code>
					</span></dt><dd><p>Creates and executes a periodic action that becomes enabled first after the given initial delay, and subsequently with the given delay between the termination of one execution and the commencement of the next. If any execution of the task encounters an exception, subsequent executions are suppressed. Otherwise, the task will only terminate via cancellation or termination of the executor.</p></dd></dl></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>There is a single Fault Tolerant Timer per RA Entity, and when first retrieved, and before any task can be scheduled, the Fault Tolerant Timer must be configured, through its configure(...) method.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="fault_tolerant_resource_adaptor_context_timer_task_and_data"/>6.4.2.2.1. The Fault Tolerant Resource Adaptor Timer Task</h5></div></div></div><p>As mentioned in previous section, tasks submitted to the Fault Tolerant Timer must follow a specific interface, <code class="literal">FaulTolerantTimerTask</code>, it is nothing more than a <code class="literal">Runnable</code>, which provides the replicable <code class="literal">FaultTolerantTimerTaskData</code>. The task data must be serializable and provide a Serializable task ID, which identifies the task, and may be used to cancel its execution.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="fault_tolerant_resource_adaptor_context_timer_example_usage"/>6.4.2.2.2. The Fault Tolerant Resource Adaptor Timer Example Usage</h5></div></div></div><p>A simple example for the usage of the Faul Tolerant Timer Task:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;data</span><span class="java_separator">,</span><span class="java_plain">&nbsp;task&nbsp;and&nbsp;factory&nbsp;implementation</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">sip11</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;java</span><span class="java_separator">.</span><span class="java_plain">io</span><span class="java_separator">.</span><span class="java_type">Serializable</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">cluster</span><span class="java_separator">.</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskDataImpl</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;taskID</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskDataImpl</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;taskID</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">taskID&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;taskID</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;getTaskID</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;taskID</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">sip11</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">cluster</span><span class="java_separator">.</span><span class="java_type">FaultTolerantTimerTask</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">cluster</span><span class="java_separator">.</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">cluster</span><span class="java_separator">.</span><span class="java_type">FaultTolerantTimerTaskFactory</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskFactoryImpl</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FaultTolerantTimerTaskFactory</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">SipResourceAdaptor</span><span class="java_plain">&nbsp;ra</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskFactoryImpl</span><span class="java_separator">(</span><span class="java_type">SipResourceAdaptor</span><span class="java_plain">&nbsp;ra</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">ra&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;ra</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTask</span><span class="java_plain">&nbsp;getTask</span><span class="java_separator">(</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_plain">&nbsp;data</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskImpl</span><span class="java_separator">(</span><span class="java_plain">ra</span><span class="java_separator">,</span><span class="java_plain">&nbsp;data</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">sip11</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">cluster</span><span class="java_separator">.</span><span class="java_type">FaultTolerantTimerTask</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_plain">cluster</span><span class="java_separator">.</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskImpl</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTask</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">SipResourceAdaptor</span><span class="java_plain">&nbsp;ra</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_plain">&nbsp;data</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskImpl</span><span class="java_separator">(</span><span class="java_type">SipResourceAdaptor</span><span class="java_plain">&nbsp;ra</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_plain">&nbsp;data</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">ra&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;ra</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">data&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;data</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;run</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ra</span><span class="java_separator">.</span><span class="java_plain">getTracer</span><span class="java_separator">(</span><span class="java_literal">&quot;FaultTolerantTimerTaskImpl&quot;</span><span class="java_separator">).</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Timer&nbsp;executed.&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskData</span><span class="java_plain">&nbsp;getTaskData</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;data</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;ra&nbsp;code&nbsp;retrieving&nbsp;the&nbsp;timer</span><span class="java_separator">,</span><span class="java_plain">&nbsp;configuring&nbsp;it&nbsp;and&nbsp;submiting&nbsp;a&nbsp;task</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setFaultTolerantResourceAdaptorContext</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FaultTolerantResourceAdaptorContext</span><span class="java_operator">&lt;</span><span class="java_type">SipActivityHandle</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;context</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">ftRaContext&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;context</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FaultTolerantTimer</span><span class="java_plain">&nbsp;timer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;context</span><span class="java_separator">.</span><span class="java_plain">getFaultTolerantTimer</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;timer</span><span class="java_separator">.</span><span class="java_plain">config</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskFactoryImpl</span><span class="java_separator">(</span><span class="java_keyword">this</span><span class="java_separator">),</span><span class="java_plain">&nbsp;</span><span class="java_literal">4</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FaultTolerantTimerTaskDataImpl</span><span class="java_plain">&nbsp;data&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskDataImpl</span><span class="java_separator">(</span><span class="java_literal">&quot;xyz&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FaultTolerantTimerTaskImpl</span><span class="java_plain">&nbsp;task&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FaultTolerantTimerTaskImpl</span><span class="java_separator">(</span><span class="java_keyword">this</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;timer</span><span class="java_separator">.</span><span class="java_plain">schedule</span><span class="java_separator">(</span><span class="java_plain">task</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">30</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">TimeUnit</span><span class="java_separator">.</span><span class="java_plain">SECONDS</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre></div></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="container_clustering_ra_activity_replication"/>6.5. Resource Adaptor Activity Replication</h2></div></div></div><p>
    The Resource Adaptor API includes an optional component named <code class="classname">javax.slee.resource.Marshaler</code>, which is responsible, besides other functions, for converting Activity Handles to byte arrays and vice-versa. Also relevant, the Resource Adaptor, when starting activities, may provide a flag indicating that the container may marshall the activity (using the Marshaler). In case of a container cluster with data replication, if an activity is to be replicated then the Marshaler must be provided and the activity flags must activate the flag MAY_MARSHALL, otherwise the activity is not replicated and if a node fails all its activities are removed from the container cluster.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
      The activity replication doesn't mean that the activity object is replicated by any means, only the related Activity Handle. The Resource Adaptor must use the Fault Tolerant RA API or its own means to replicate any additional data to support that presence of the activity in all nodes of the cluster. Usage of the Fault Tolerant RA API is recommended since it reuses the clustering setup of the container.
      </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_connection_factory"/>Chapter 7. Firing Events from Java EE Applications</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#slee_connection_factory_intro">7.1. SLEE Connection Factory</a></span></dt><dd><dl><dt><span class="section"><a href="#local_slee_connection_factory">7.1.1. Local SLEE Connection Factory</a></span></dt><dt><span class="section"><a href="#remote_slee_connection_factory">7.1.2. Remote SLEE Connection Factory</a></span></dt><dt><span class="section"><a href="#using-slee-connection-factory">7.1.3. Using SLEE Connection Factory</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_connection_factory_intro"/>7.1. SLEE Connection Factory</h2></div></div></div><p>The JAIN SLEE specification includes an API for interaction with JAIN SLEE container, with the interface <code class="classname">javax.slee.connection.SleeConnectionFactory</code> upfront, which allows external applications, such as an EJB, to create connections to a specific JAIN SLEE instance, and use that to fire events.
    </p><p>JAIN SLEE provides two different implementations of the API, one for access in the same JVM, another for remote access. Both implementations expose the SLEE Connection Factory in the local JNDI tree, thus the same code is used by the application independently of the implementation used.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="local_slee_connection_factory"/>7.1.1. Local SLEE Connection Factory</h3></div></div></div><p>JAIN SLEE container instances always expose the local SLEE Connection Factory in its JVM, which means that an external application running in the same JVM doesn't need any additional tools or setup to use it.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="remote_slee_connection_factory"/>7.1.2. Remote SLEE Connection Factory</h3></div></div></div><p>JAIN SLEE includes a tool, named Remote SLEE Connection Tool, which is a JCA connector that can be deployed in any Java EE application server. Once deployed this connector installs the factory into JNDI, which communicates with the remote SLEE container through RMI.</p><p>Mobicents Remote SLEE Connection Tool is bundled in all Mobicents JAIN SLEE releases, in the tools/remote-slee-connection directory, including its own documentation.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="using-slee-connection-factory"/>7.1.3. Using SLEE Connection Factory</h3></div></div></div><p>Below is example code which retrieves the SLEE Connection Factory and uses it to fire an event into the JAIN SLEE container. The code is the same whether the SLEE container is in the same JVM or not.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;retrieves&nbsp;JNDI&nbsp;context</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">InitialContext</span><span class="java_plain">&nbsp;context&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">InitialContext</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;retrieves&nbsp;the&nbsp;connection&nbsp;factory&nbsp;from&nbsp;JNDI</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SleeConnectionFactory</span><span class="java_plain">&nbsp;factory&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">SleeConnectionFactory</span><span class="java_separator">)</span><span class="java_plain">&nbsp;context</span><span class="java_separator">.</span><span class="java_plain">lookup</span><span class="java_separator">(</span><span class="java_literal">&quot;java:/MobicentsConnectionFactory&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;creates&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;SLEE&nbsp;container</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SleeConnection</span><span class="java_plain">&nbsp;connection&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;factory</span><span class="java_separator">.</span><span class="java_plain">getConnection</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;creates&nbsp;the&nbsp;activity&nbsp;handle&nbsp;which&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;fire&nbsp;the&nbsp;event&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ExternalActivityHandle</span><span class="java_plain">&nbsp;handle&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">createActivityHandle</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;retrieves&nbsp;the&nbsp;event&nbsp;type&nbsp;ID</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">EventTypeID</span><span class="java_plain">&nbsp;eventTypeID&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">getEventTypeID</span><span class="java_separator">(</span><span class="java_literal">&quot;CustomEvent&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;...&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;1.0&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;creates&nbsp;the&nbsp;event&nbsp;object</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CustomEvent</span><span class="java_plain">&nbsp;eventObject&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomEvent</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;fires&nbsp;the&nbsp;event&nbsp;in&nbsp;the&nbsp;remote&nbsp;SLEE&nbsp;container</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">fireEvent</span><span class="java_separator">(</span><span class="java_plain">eventObject</span><span class="java_separator">,</span><span class="java_plain">&nbsp;eventTypeID</span><span class="java_separator">,</span><span class="java_plain">&nbsp;handle</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;closes&nbsp;the&nbsp;connection</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="java_separator">.</span><span class="java_plain">close</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_1_1_extensions"/>Chapter 8. JAIN SLEE 1.1 Extensions</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#slee_1_1_extensions_sbbcontext">8.1. SbbContext Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_cr">8.2. ChildRelation Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_sbblo">8.3. SbbLocalObject Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_profilecontext">8.4. ProfileContext Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_aci">8.5. ActivityContextInterface Extension</a></span></dt><dt><span class="section"><a href="#slee_1_1_extensions_library_references">8.6. Library References Extension</a></span></dt><dd><dl><dt><span class="section"><a href="#slee_1_1_ext_library_jar_xml_descriptor_dtd">8.6.1. Extended Library Jar XML Descriptor DTD</a></span></dt><dt><span class="section"><a href="#slee_1_1_ext_library_jar_xml_descriptor_example">8.6.2. Extended Library Jar XML Descriptor Example</a></span></dt></dl></dd></dl></div><p>Mobicents <acronym class="acronym">JAIN SLEE</acronym> exposes proprietary extensions to the <acronym class="acronym">JAIN SLEE</acronym> 1.1 specification, to allow the development of easier or more powerful application code.</p><p>The extensions were discussed among multiple <acronym class="acronym">JAIN SLEE</acronym> vendors, and should become part of the standard in next revision, but there is no guarantee that portability won't be lost when using those.</p><p>The extensions source code is available in the Mobicents Community SVN, specifically at <a class="ulink" href="http://mobicents.googlecode.com/svn/tags/servers/jain-slee/2.x.y/api/extensions/1.0.0.BETA1">http://mobicents.googlecode.com/svn/tags/servers/jain-slee/2.x.y/api/extensions/1.0.0.BETA1</a>. The setup for the source project in Eclipse IDE is similar to the container core, as seen in  <a class="xref" href="#eclipse_ide" title="9.5. Setting JAIN SLEE Source Code Projects in Eclipse IDE">Section 9.5, “Setting JAIN SLEE Source Code Projects in Eclipse IDE”</a>.</p><p>Java archives (JARs) with compiled classes, javadocs and sources are available in the JBoss Maven Repository at <a class="ulink" href="http://repository.jboss.org/nexus/content/groups/public/org/mobicents/servers/jainslee/api/jain-slee-11-ext/1.0.0.BETA1/">http://repository.jboss.org/nexus/content/groups/public/org/mobicents/servers/jainslee/api/jain-slee-11-ext/1.0.0.BETA1/</a></p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_1_1_extensions_sbbcontext"/>8.1. SbbContext Extension</h2></div></div></div><p>This extension to JAIN SLEE 1.1 introduces <code class="filename">org.mobicents.slee.SbbContextExt</code> interface, which extends <code class="filename">javax.slee.SbbContext</code> with methods to retrieve SLEE factories and facilities, avoiding the usage of JNDI context.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_type">ActivityContextInterface</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_type">Sbb</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_type">SbbContext</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">facilities</span><span class="java_separator">.</span><span class="java_type">ActivityContextNamingFacility</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">facilities</span><span class="java_separator">.</span><span class="java_type">AlarmFacility</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">facilities</span><span class="java_separator">.</span><span class="java_type">TimerFacility</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">nullactivity</span><span class="java_separator">.</span><span class="java_type">NullActivityContextInterfaceFactory</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">nullactivity</span><span class="java_separator">.</span><span class="java_type">NullActivityFactory</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">profile</span><span class="java_separator">.</span><span class="java_type">ProfileFacility</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">profile</span><span class="java_separator">.</span><span class="java_type">ProfileTableActivityContextInterfaceFactory</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">resource</span><span class="java_separator">.</span><span class="java_type">ResourceAdaptorTypeID</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">serviceactivity</span><span class="java_separator">.</span><span class="java_type">ServiceActivityContextInterfaceFactory</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">serviceactivity</span><span class="java_separator">.</span><span class="java_type">ServiceActivityFactory</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbContextExt</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbContext</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;getActivityContextInterfaceFactory</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ResourceAdaptorTypeID</span><span class="java_plain">&nbsp;raTypeID</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">NullPointerException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">IllegalArgumentException</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">ActivityContextNamingFacility</span><span class="java_plain">&nbsp;getActivityContextNamingFacility</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">AlarmFacility</span><span class="java_plain">&nbsp;getAlarmFacility</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">NullActivityContextInterfaceFactory</span><span class="java_plain">&nbsp;getNullActivityContextInterfaceFactory</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">NullActivityFactory</span><span class="java_plain">&nbsp;getNullActivityFactory</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">ProfileFacility</span><span class="java_plain">&nbsp;getProfileFacility</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">ProfileTableActivityContextInterfaceFactory</span><span class="java_plain">&nbsp;getProfileTableActivityContextInterfaceFactory</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;getResourceAdaptorInterface</span><span class="java_separator">(</span><span class="java_type">ResourceAdaptorTypeID</span><span class="java_plain">&nbsp;raTypeID</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;raEntityLink</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">NullPointerException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">IllegalArgumentException</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbLocalObjectExt</span><span class="java_plain">&nbsp;getSbbLocalObject</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">TransactionRequiredLocalException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">IllegalStateException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SLEEException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">ServiceActivityContextInterfaceFactory</span><span class="java_plain">&nbsp;getServiceActivityContextInterfaceFactory</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">ServiceActivityFactory</span><span class="java_plain">&nbsp;getServiceActivityFactory</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">TimerFacility</span><span class="java_plain">&nbsp;getTimerFacility</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><div class="variablelist"><dl><dt><span class="term">The <code class="literal">getActivityContextInterfaceFactory(ResourceAdaptorTypeID)</code> method:</span></dt><dd><p>Retrieves the ActivityContextInterface factory for the Resource Adaptor Type with the specified ID.</p></dd><dt><span class="term">The <code class="literal">getActivityContextNamingFacility()</code> method:</span></dt><dd><p>Retrieves the Activity Context Naming Facility.</p></dd><dt><span class="term">The <code class="literal">getAlarmFacility()</code> method:</span></dt><dd><p>Retrieves the Alarm Facility.</p></dd><dt><span class="term">The <code class="literal">getNullActivityContextInterfaceFactory()</code> method:</span></dt><dd><p>Retrieves the Null Activity Context Interface Factory.</p></dd><dt><span class="term">The <code class="literal">getNullActivityFactory()</code> method:</span></dt><dd><p>Retrieves the Null Activity Factor.</p></dd><dt><span class="term">The <code class="literal">getProfileFacility()</code> method:</span></dt><dd><p>Retrieves the Profile Facility.</p></dd><dt><span class="term">The <code class="literal">getProfileTableActivityContextInterfaceFactory()</code> method:</span></dt><dd><p>Retrieves the Profile Table Activity Context Interface Factory.</p></dd><dt><span class="term">The <code class="literal">getResourceAdaptorInterface(ResourceAdaptorTypeID,String)</code> method:</span></dt><dd><p>Retrieves the interface to interact with a specific Resource Adaptor entity, identified by both the entity link name and the Resource Adaptor Type ID.</p></dd><dt><span class="term">The <code class="literal">getSbbLocalObject()</code> method:</span></dt><dd><p>Exposes the SBB local object with the extension interface to avoid unneeded casts.</p></dd><dt><span class="term">The <code class="literal">getServiceActivityContextInterfaceFactory()</code> method:</span></dt><dd><p>Retrieves the Service Activity Context Interface Factory.</p></dd><dt><span class="term">The <code class="literal">getServiceActivityFactory()</code> method:</span></dt><dd><p>Retrieves the Service Activity Factory.</p></dd><dt><span class="term">The <code class="literal">getTimerFacility()</code> method:</span></dt><dd><p>Retrieves the Timer Facility.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_1_1_extensions_cr"/>8.2. ChildRelation Extension</h2></div></div></div><p>This extension to JAIN SLEE 1.1 introduces the <code class="methodname">org.mobicents.slee.ChildRelationExt</code> interface, which extends <code class="classname">javax.slee.ChildRelation</code> with methods to create and retrieve SBB entities by name.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">ChildRelationExt</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">ChildRelation</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbLocalObjectExt</span><span class="java_plain">&nbsp;create</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">CreateException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">TransactionRequiredLocalException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SLEEException</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbLocalObjectExt</span><span class="java_plain">&nbsp;get</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">TransactionRequiredLocalException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SLEEException</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><div class="variablelist"><dl><dt><span class="term">The <code class="literal">create(String)</code> method:</span></dt><dd><p>Creates a new SBB entity of the SBB type associated with the relation, with the specified name. The new SBB entity is automatically added to the relationship collection. The returned object may be cast to the required local interface type using the normal Java typecast mechanism. This method is a mandatory transactional method.</p></dd><dt><span class="term">The <code class="literal">get(String)</code> method:</span></dt><dd><p>Retrieves the SBB entity associated with the child relation with the specified name. This method is a mandatory transactional method.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_1_1_extensions_sbblo"/>8.3. SbbLocalObject Extension</h2></div></div></div><p>This extension to JAIN SLEE 1.1 introduces the <code class="methodname">org.mobicents.slee.SbbLocalObjectExt</code> interface, which extends <code class="classname">javax.slee.SbbLocalObject</code> with methods to retrieve the parent SBB Entity, if any, and to also retrieve information such as the child name, and the parent child relation name.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbLocalObjectExt</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbLocalObject</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getChildRelation</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">TransactionRequiredLocalException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SLEEException</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">NoSuchObjectLocalException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">TransactionRequiredLocalException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SLEEException</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">SbbLocalObjectExt</span><span class="java_plain">&nbsp;getParent</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">NoSuchObjectLocalException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">TransactionRequiredLocalException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SLEEException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><div class="variablelist"><dl><dt><span class="term">The <code class="literal">getChildRelation()</code> method:</span></dt><dd><p>Retrieves the name of the child relation used to create this object. This method is a mandatory transactional method.</p></dd><dt><span class="term">The <code class="literal">getName()</code> method:</span></dt><dd><p>Retrieves the name of the object. This method is a mandatory transactional method.</p></dd><dt><span class="term">The <code class="literal">getParent()</code> method:</span></dt><dd><p>Retrieves the parent SBB object. This method is a mandatory transactional method.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_1_1_extensions_profilecontext"/>8.4. ProfileContext Extension</h2></div></div></div><p>This extension to JAIN SLEE 1.1 introduces <code class="filename">org.mobicents.slee.ProfileContextExt</code> interface, which extends <code class="filename">javax.slee.ProfileContext</code> with methods to retrieve SLEE alarm facility, avoiding the usage of JNDI context.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">facilities</span><span class="java_separator">.</span><span class="java_type">AlarmFacility</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">profile</span><span class="java_separator">.</span><span class="java_type">Profile</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">profile</span><span class="java_separator">.</span><span class="java_type">ProfileContext</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">ProfileContextExt</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">ProfileContext</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">AlarmFacility</span><span class="java_plain">&nbsp;getAlarmFacility</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><div class="variablelist"><dl><dt><span class="term">The <code class="literal">getAlarmFacility()</code> method:</span></dt><dd><p>Retrieves the Alarm Facility.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_1_1_extensions_aci"/>8.5. ActivityContextInterface Extension</h2></div></div></div><p>This simple extension to JAIN SLEE 1.1 introduces <code class="filename">org.mobicents.slee.ActivityContextInterfaceExt</code> interface, which extends <code class="filename">javax.slee.ActivityContextInterface</code> with methods to retrieve the timers and names bound to the ACI.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_type">ActivityContextInterface</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">facilities</span><span class="java_separator">.</span><span class="java_type">TimerID</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">ActivityContextInterfaceExt</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">ActivityContextInterface</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">TimerID</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getTimers</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getNamesBound</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><div class="variablelist"><dl><dt><span class="term">The <code class="literal">getTimers()</code> method:</span></dt><dd><p>Retrieves the IDs of timers currently set which are related to the ACI.</p></dd><dt><span class="term">The <code class="literal">getNamesBound()</code> method:</span></dt><dd><p>Retrieves the names currently bound to the ACI.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="slee_1_1_extensions_library_references"/>8.6. Library References Extension</h2></div></div></div><p>JAIN SLEE 1.1 standard introduced the Library component, a wrapper for a set of jars and/or classes to be referenced and used by other components types, such as SBBs.</p><p>The usage of the standard Library component is very limited, each Library can only refer other Library components. Due to this limitation a developer may not be able to include classes in a Library that depend, just as example, on Resource Adaptor Type interfaces, unless of course those interfaces are in a Library too.</p><p>This extension allows libraries to reference other component types, which the developer should use when the classes in the Library need to use classes from that component, by simply extending the JAIN SLEE 1.1 Library Jar XML descriptor.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="slee_1_1_ext_library_jar_xml_descriptor_dtd"/>8.6.1. Extended Library Jar XML Descriptor DTD</h3></div></div></div><p>The DTD document changes for the extended library jar XML descriptor:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;library&nbsp;element&nbsp;defines&nbsp;a&nbsp;library.&nbsp;&nbsp;It&nbsp;contains&nbsp;an&nbsp;optional&nbsp;description</span><span class="xml_plain"></span><br />
<span class="xml_comment">about&nbsp;the&nbsp;library,&nbsp;the&nbsp;name,&nbsp;vendor,&nbsp;and&nbsp;version&nbsp;of&nbsp;the&nbsp;library&nbsp;being&nbsp;defined,</span><span class="xml_plain"></span><br />
<span class="xml_comment">zero&nbsp;or&nbsp;more&nbsp;references&nbsp;to&nbsp;any&nbsp;other&nbsp;components&nbsp;that&nbsp;this&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_comment">depends&nbsp;on,&nbsp;and&nbsp;information&nbsp;about&nbsp;zero&nbsp;or&nbsp;more&nbsp;jar&nbsp;files&nbsp;that&nbsp;contain</span><span class="xml_plain"></span><br />
<span class="xml_comment">prepackaged&nbsp;classes&nbsp;and&nbsp;resources&nbsp;to&nbsp;be&nbsp;included&nbsp;with&nbsp;the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;classes&nbsp;and&nbsp;resources&nbsp;for&nbsp;a&nbsp;library&nbsp;are&nbsp;the&nbsp;sum&nbsp;total&nbsp;of&nbsp;the&nbsp;classes&nbsp;and</span><span class="xml_plain"></span><br />
<span class="xml_comment">resources&nbsp;contained&nbsp;in:</span><span class="xml_plain"></span><br />
<span class="xml_comment">-&nbsp;the&nbsp;library&nbsp;component&nbsp;jar&nbsp;itself&nbsp;(if&nbsp;any)</span><span class="xml_plain"></span><br />
<span class="xml_comment">-&nbsp;the&nbsp;library&nbsp;jars&nbsp;specified&nbsp;by&nbsp;the&nbsp;jar&nbsp;elements&nbsp;(if&nbsp;any)</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">All&nbsp;these&nbsp;classes&nbsp;are&nbsp;loaded&nbsp;by&nbsp;the&nbsp;same&nbsp;classloader.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;library-jar</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library</span><span class="xml_plain">&nbsp;(</span><span class="xml_attribute_name">description</span><span class="xml_plain">?,&nbsp;</span><span class="xml_attribute_name">library-name</span><span class="xml_plain">,&nbsp;</span><span class="xml_attribute_name">library-vendor</span><span class="xml_plain">,&nbsp;</span><span class="xml_attribute_name">library-version</span><span class="xml_plain">,</span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-ref</span><span class="xml_plain">*,&nbsp;</span><span class="xml_attribute_name">library-ref</span><span class="xml_plain">*,&nbsp;</span><span class="xml_attribute_name">profile-spec-ref</span><span class="xml_plain">*,&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-ref</span><span class="xml_plain">*,</span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-ref</span><span class="xml_plain">*,&nbsp;</span><span class="xml_attribute_name">jar</span><span class="xml_plain">*)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;event-type-ref&nbsp;element&nbsp;identifies&nbsp;an&nbsp;event&nbsp;type&nbsp;that&nbsp;the&nbsp;library&nbsp;classes&nbsp;depend.</span><span class="xml_plain"></span><br />
<span class="xml_comment">It&nbsp;contains&nbsp;the&nbsp;name,&nbsp;vendor,and&nbsp;version&nbsp;of&nbsp;the&nbsp;event&nbsp;type.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-ref</span><span class="xml_plain">&nbsp;(</span><span class="xml_attribute_name">event-type-name</span><span class="xml_plain">,&nbsp;</span><span class="xml_attribute_name">event-type-vendor</span><span class="xml_plain">,&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">event-type-version</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;event-type-name&nbsp;element&nbsp;contains&nbsp;the&nbsp;name&nbsp;of&nbsp;an&nbsp;event&nbsp;type&nbsp;referred&nbsp;by</span><span class="xml_plain"></span><br />
<span class="xml_comment">the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;event-type-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;event-type-name&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;javax.csapi.cc.jcc.JccCallEvent.CALL_CREATED</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/event-type-name&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-name</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;event-type-vendor&nbsp;element&nbsp;contains&nbsp;the&nbsp;vendor&nbsp;of&nbsp;an&nbsp;event&nbsp;type&nbsp;referred&nbsp;by</span><span class="xml_plain"></span><br />
<span class="xml_comment">the&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;event-type-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;event-type-vendor&gt;javax.csapi.cc.jcc&lt;/event-type-vendor&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-vendor</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;event-type-version&nbsp;element&nbsp;contains&nbsp;the&nbsp;version&nbsp;of&nbsp;an&nbsp;event&nbsp;type&nbsp;referred&nbsp;by</span><span class="xml_plain"></span><br />
<span class="xml_comment">the&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;event-type-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;event-type-version&gt;1.1&lt;/event-type-version&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-version</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;profile-spec-ref&nbsp;element&nbsp;identifies&nbsp;an&nbsp;profile&nbsp;specification&nbsp;that&nbsp;the&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_comment">classes&nbsp;depend.&nbsp;It&nbsp;contains&nbsp;an&nbsp;optional&nbsp;description&nbsp;about&nbsp;the&nbsp;reference,&nbsp;and&nbsp;the</span><span class="xml_plain"></span><br />
<span class="xml_comment">name,&nbsp;vendor,&nbsp;and&nbsp;version&nbsp;of&nbsp;the&nbsp;referenced&nbsp;profile&nbsp;specification.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-ref</span><span class="xml_plain">&nbsp;(</span><span class="xml_attribute_name">description</span><span class="xml_plain">?,&nbsp;</span><span class="xml_attribute_name">profile-spec-name</span><span class="xml_plain">,</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">profile-spec-vendor</span><span class="xml_plain">,&nbsp;</span><span class="xml_attribute_name">profile-spec-version</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;profile-spec-name&nbsp;element&nbsp;contains&nbsp;the&nbsp;name&nbsp;of&nbsp;a&nbsp;profile&nbsp;specification</span><span class="xml_plain"></span><br />
<span class="xml_comment">component.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;profile-spec-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;profile-spec-name&gt;AddressProfileSpec&lt;/profile-spec-name&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-name</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;profile-spec-vendor&nbsp;element&nbsp;contains&nbsp;the&nbsp;vendor&nbsp;of&nbsp;a&nbsp;profile&nbsp;specification</span><span class="xml_plain"></span><br />
<span class="xml_comment">component.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;profile-spec-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;profile-spec-name&gt;javax.slee&lt;/profile-spec-name&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-vendor</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;profile-spec-version&nbsp;element&nbsp;contains&nbsp;the&nbsp;version&nbsp;of&nbsp;a&nbsp;profile</span><span class="xml_plain"></span><br />
<span class="xml_comment">specification&nbsp;component.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;profile-spec-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;profile-spec-version&gt;1.0&lt;/profile-spec-version&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-version</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;resource-adaptor-type-ref&nbsp;element&nbsp;identifies&nbsp;an&nbsp;resource&nbsp;adaptor&nbsp;type&nbsp;that&nbsp;the</span><span class="xml_plain"></span><br />
<span class="xml_comment">library&nbsp;classes&nbsp;depend.&nbsp;It&nbsp;contains&nbsp;the&nbsp;name,&nbsp;vendor,and&nbsp;version&nbsp;of&nbsp;the&nbsp;RA&nbsp;type.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-ref</span><span class="xml_plain">&nbsp;(</span><span class="xml_attribute_name">resource-adaptor-type-name</span><span class="xml_plain">,</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-vendor</span><span class="xml_plain">,&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-version</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;resource-adaptor-type-name&nbsp;element&nbsp;contains&nbsp;the&nbsp;name&nbsp;of&nbsp;a&nbsp;resource</span><span class="xml_plain"></span><br />
<span class="xml_comment">adaptor&nbsp;type&nbsp;component&nbsp;referred&nbsp;by&nbsp;the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;resource-adaptor-type-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;resource-adaptor-type-name&gt;JCC&lt;/resource-adaptor-type-name&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-name</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;resource-adaptor-type-vendor&nbsp;element&nbsp;contains&nbsp;the&nbsp;vendor&nbsp;of&nbsp;a&nbsp;resource</span><span class="xml_plain"></span><br />
<span class="xml_comment">adaptor&nbsp;type&nbsp;component&nbsp;referred&nbsp;by&nbsp;the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;resource-adaptor-type-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;resource-adaptor-type-vendor&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;javax.csapi.cc.jcc</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/resource-adaptor-type-vendor&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-vendor</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;resource-adaptor-type-version&nbsp;element&nbsp;contains&nbsp;the&nbsp;version&nbsp;of&nbsp;a&nbsp;resource</span><span class="xml_plain"></span><br />
<span class="xml_comment">adaptor&nbsp;type&nbsp;component&nbsp;referred&nbsp;by&nbsp;the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;resource-adaptor-type-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;resource-adaptor-type-version&gt;1.1&lt;/resource-adaptor-type-version&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-version</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;sbb-ref&nbsp;element&nbsp;identifies&nbsp;an&nbsp;SBB&nbsp;that&nbsp;the&nbsp;library&nbsp;classes&nbsp;depend.</span><span class="xml_plain"></span><br />
<span class="xml_comment">It&nbsp;contains&nbsp;the&nbsp;name,&nbsp;vendor,and&nbsp;version&nbsp;of&nbsp;the&nbsp;SBB.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;library</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-ref</span><span class="xml_plain">&nbsp;(</span><span class="xml_attribute_name">sbb-name</span><span class="xml_plain">,&nbsp;</span><span class="xml_attribute_name">sbb-vendor</span><span class="xml_plain">,&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">sbb-version</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;sbb-name&nbsp;element&nbsp;contains&nbsp;the&nbsp;name&nbsp;of&nbsp;a&nbsp;SBB&nbsp;component&nbsp;referred</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;by&nbsp;the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;sbb-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:&nbsp;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;sbb-name&gt;MySbb&lt;/sbb-name&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-name</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;sbb-vendor&nbsp;element&nbsp;contains&nbsp;the&nbsp;vendor&nbsp;of&nbsp;a&nbsp;SBB&nbsp;component&nbsp;referred</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;by&nbsp;the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;sbb-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:&nbsp;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;sbb-vendor&gt;My&nbsp;Company,&nbsp;Inc.&lt;/sbb-vendor&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-vendor</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;sbb-version&nbsp;element&nbsp;contains&nbsp;the&nbsp;version&nbsp;of&nbsp;a&nbsp;SBB&nbsp;component&nbsp;referred</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;by&nbsp;the&nbsp;library.</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Used&nbsp;in:&nbsp;sbb-ref</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">Example:&nbsp;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;sbb-version&gt;1.0&lt;/sbb-version&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ELEMENT</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-version</span><span class="xml_plain">&nbsp;(#</span><span class="xml_attribute_name">PCDATA</span><span class="xml_plain">)</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--&nbsp;</span><span class="xml_plain"></span><br />
<span class="xml_comment">The&nbsp;ID&nbsp;mechanism&nbsp;is&nbsp;to&nbsp;allow&nbsp;tools&nbsp;that&nbsp;produce&nbsp;additional&nbsp;deployment</span><span class="xml_plain"></span><br />
<span class="xml_comment">information&nbsp;(ie.&nbsp;information&nbsp;beyond&nbsp;that&nbsp;contained&nbsp;by&nbsp;the&nbsp;standard&nbsp;SLEE</span><span class="xml_plain"></span><br />
<span class="xml_comment">deployment&nbsp;descriptors)&nbsp;to&nbsp;store&nbsp;the&nbsp;non-standard&nbsp;information&nbsp;in&nbsp;a&nbsp;separate</span><span class="xml_plain"></span><br />
<span class="xml_comment">file,&nbsp;and&nbsp;easily&nbsp;refer&nbsp;from&nbsp;those&nbsp;tools-specific&nbsp;files&nbsp;to&nbsp;the&nbsp;information&nbsp;in</span><span class="xml_plain"></span><br />
<span class="xml_comment">the&nbsp;standard&nbsp;deployment&nbsp;descriptor.&nbsp;&nbsp;The&nbsp;SLEE&nbsp;architecture&nbsp;does&nbsp;not&nbsp;allow&nbsp;the</span><span class="xml_plain"></span><br />
<span class="xml_comment">tools&nbsp;to&nbsp;add&nbsp;the&nbsp;non-standard&nbsp;information&nbsp;into&nbsp;the&nbsp;SLEE-defined&nbsp;deployment</span><span class="xml_plain"></span><br />
<span class="xml_comment">descriptors.</span><span class="xml_plain"></span><br />
<span class="xml_comment">--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library-jar</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">description</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library-name</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library-vendor</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library-version</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-ref</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-name</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-vendor</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event-type-version</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library-ref</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-ref</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-name</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-vendor</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">profile-spec-version</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-ref</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-name</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-vendor</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-adaptor-type-version</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-ref</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-name</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-vendor</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sbb-version</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jar</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jar-name</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">security-permissions</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">ATTLIST</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">security-permission-spec</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ID</span><span class="xml_plain">&nbsp;#</span><span class="xml_attribute_name">IMPLIED</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>This full DTD is available at <a class="ulink" href="http://mobicents.org/slee/dtd/slee-library-jar_1_1-ext.dtd">http://mobicents.org/slee/dtd/slee-library-jar_1_1-ext.dtd</a></p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="slee_1_1_ext_library_jar_xml_descriptor_example"/>8.6.2. Extended Library Jar XML Descriptor Example</h3></div></div></div><p>The following XML descriptor examples the definition of references to JAIN SLEE 1.1 Component types other than Library</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">library-jar</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;-//Sun&nbsp;Microsystems,&nbsp;Inc.//DTD&nbsp;JAIN&nbsp;SLEE&nbsp;Ext&nbsp;Library&nbsp;1.1//EN&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://mobicents.org/slee/dtd/slee-library-jar_1_1-ext.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-jar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">extended-library-example</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.redhat</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event-type-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event-type-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">ExampleX</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event-type-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event-type-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.redhat</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event-type-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event-type-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event-type-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event-type-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">LibraryX</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.redhat</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">library-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">profile-spec-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">profile-spec-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">ProfileX</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">profile-spec-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">profile-spec-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.redhat</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">profile-spec-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">profile-spec-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">profile-spec-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">profile-spec-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-adaptor-type-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-adaptor-type-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">ResourceAdaptorTypeX</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-adaptor-type-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-adaptor-type-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.redhat</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-adaptor-type-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-adaptor-type-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-adaptor-type-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-adaptor-type-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sbb-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sbb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SbbX</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sbb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sbb-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.redhat</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sbb-vendor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sbb-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sbb-version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sbb-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">library-jar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>Note how the DOCTYPE element is set to the extended DTD instead of the standard one.</p></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="advanced_topics"/>Chapter 9. Advanced Topics</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#classloading">9.1. Class Loading</a></span></dt><dt><span class="section"><a href="#congestion_control">9.2. Congestion Control</a></span></dt><dd><dl><dt><span class="section"><a href="#congestion_control_configuration">9.2.1. Congestion Control Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#jpa_slee_profiles_mapping">9.3. JAIN SLEE 1.1 Profiles JPA Mapping</a></span></dt><dd><dl><dt><span class="section"><a href="#profile_jpa_tables_and_columns">9.3.1. Profile Specification JPA Tables And columns</a></span></dt><dt><span class="section"><a href="#profile_jpa_datasource">9.3.2. Profile Specification JPA Datasource</a></span></dt></dl></dd><dt><span class="section"><a href="#testing_tck">9.4. Testing the JAIN SLEE 1.1 TCK</a></span></dt><dt><span class="section"><a href="#eclipse_ide">9.5. Setting JAIN SLEE Source Code Projects in Eclipse IDE</a></span></dt></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="classloading"/>9.1. Class Loading</h2></div></div></div><p>Each JAIN SLEE Component has its own classloader (<code class="literal">ComponentClassLoader</code>) in the package named <code class="literal">org.mobicents.slee.container.component.deployment.classloading</code>. This classloader sees the component classes contained in the component jar (<code class="literal">URLClassLoaderDomain</code>) by declaring it as the parent classloader, and adding the classes seen by each component it refers. It does not see classes from a component that it does not depend on.
  </p><p>JAIN SLEE defines a class loading domain with the <acronym class="acronym">API</acronym>s required in the JAIN SLEE 1.1 container (for example, JAIN SLEE, <acronym class="acronym">JBDC</acronym> and <acronym class="acronym">JMX</acronym>). This domain (<code class="literal">JBoss Microcontainer ClassLoadingDomain</code>) imports all classes shared in the JBoss Application Server, and acts like the parent domain for all <code class="literal">URLClassLoaderDomain</code>s, which means that a class imported by a SLEE classloading domain will always be used first.</p><div class="figure"><a id="d0e2525"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/classloading.png" align="middle" alt="Classloading example in Mobicents JAIN SLEE"/></div></div><p class="title"><b>Figure 9.1. Classloading example in Mobicents JAIN SLEE</b></p></div><br class="figure-break"/><div class="itemizedlist"><ul><li><p>The <code class="literal">SIP INVITE Event</code> component refers to the <code class="literal">JAIN SIP Library</code> in its XML descriptor, and its classloader domain depends on the classloader domain of the JAIN SIP Library.</p></li><li><p>The <code class="literal">SIP RA Type</code> component refers to all Events in the SIP RA Event jar in its XML descriptor, and its classloader domain depends on the classloader domain of the SIP Event JAR and inherits its dependencies, including the JAIN SIP library classloading domain.</p></li><li><p>The <code class="literal">SIP RA</code> component refers to the <code class="literal">SIP RA Type</code> component in its XML descriptor, and its classloader domain depends on the classloader domain of the SIP RA Type Component jar, and inherits its dependencies. This includes the SIP Event jar and JAIN SIP library classloading domains.</p></li><li><p>The <code class="literal">SBB</code> component refers to the <code class="literal">SIP RA Type</code> component and <code class="literal">SIP INVITE Event</code> in its XML descriptor. Its classloader domain depends on the class loader domain of the SIP RA Type Component jar, and inherits its dependencies; the SIP Event jar and the JAIN SIP library classloading domains. It also depends on the classloader domain of the SIP Event jar.</p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>JBoss Application Server does not see the classes of deployed JAIN SLEE components. This means that if it exports its classes for components that are complemented with Java EE components, the common classes must be deployed on JBoss Application Server, either directly or included in the Java EE component.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="congestion_control"/>9.2. Congestion Control</h2></div></div></div><p>JAIN SLEE can monitor the memory available in the JVM. In case it drops to a certain level (percentage), new events and/or activity startups are rejected, and at the same time a JAIN SLEE Alarm (which can send JMX notifications) is raised. This feature is called Congestion Control, and the container will turn it off automatically once another available memory level is reached.</p><p>If Congestion Control rejects an operation, a <code class="classname">javax.slee.SleeException</code> is thrown. This means that if the feature is to be used, the Resource Adaptors and Applications need to handle such use case, and behave properly.</p><p>The type of JAIN SLEE Alarm raised is <span class="application"><strong>org.mobicents.slee.management.alarm.congestion</strong></span>.</p><p>Congestion Control is turned off by default.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="congestion_control_configuration"/>9.2.1. Congestion Control Configuration</h3></div></div></div><p>The Congestion Control feature is configured through an XML file or through a JMX MBean. Changes applied through JMX are not persisted, and once the container is restarted the configuration will revert to the one in the XML file.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="congestion_control_persistent_configuration"/>9.2.1.1. Congestion Control Persistent Configuration</h4></div></div></div><p>Configuration is done through a XML descriptor for each <a class="xref" href="#server_profiles" title="3.1. Server Profiles">Section 3.1, “Server Profiles”</a>. The XML file is named <code class="filename">jboss-beans.xml</code> and is located at <code class="filename">$JBOSS_HOME/server/profile_name/deploy/mobicents-slee/META-INF</code>, where <span class="application"><strong>profile_name</strong></span> is the server profile name.</p><p>The configuration is exposed a JBoss Microcontainer Bean:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Mobicents.JAINSLEE.CongestionControlConfiguration&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.slee.container.management.jmx.CongestionControlConfiguration&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">@org.jboss.aop.microcontainer.aspects.jmx.JMX(name=</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;org.mobicents.slee:name=CongestionControlConfiguration&quot;,exposedInterface=</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.mobicents.slee.container.management.jmx.CongestionControlConfigurationMBean.class,</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registerDirectly=true)</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">annotation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;periodBetweenChecks&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;minFreeMemoryToTurnOn&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">10</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;minFreeMemoryToTurnOff&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">20</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;refuseStartActivity&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;refuseFireEvent&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><div class="table"><a id="d0e2613"/><p class="title"><b>Table 9.1. JAIN SLEE Congestion Control Bean Configuration</b></p><div class="table-contents"><table summary="JAIN SLEE Congestion Control Bean Configuration" width="100%" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Property Name</th><th>Property Type</th><th>Description</th></tr></thead><tbody><tr><td>periodBetweenChecks</td><td>int</td><td>The available memory level is checked periodically, this property defines the period, in seconds, between these checks, and if set to 0 turns off the Congestion Control feature.</td></tr><tr><td>minFreeMemoryToTurnOn</td><td>int</td><td>This property defines the minimum free memory percentage, which if reached turns ON the Congestion Control feature.</td></tr><tr><td>minFreeMemoryToTurnOff</td><td>int</td><td>This property defines the minimum free memory percentage, which if reached turns OFF the Congestion Control feature. This value should be considerably higher than minFreeMemoryToTurnOn, otherwise the feature may be turning on and off all the time.</td></tr><tr><td>refuseStartActivity</td><td>boolean</td><td>If true and the Congestion Control feature is ON, the container rejects activity startups, no matter it's a request from a Resource Adaptor or SBB.</td></tr><tr><td>refuseFireEvent</td><td>boolean</td><td>If true and the Congestion Control feature is ON, the container rejects the firing of events, no matter it's a request from a Resource Adaptor or SBB.</td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="congestion_control_jmx_configuration"/>9.2.1.2. Congestion Control JMX Configuration</h4></div></div></div><p>Through JMX, the Congestion Control feature configuration can be changed with the container running. These configuration changes are not persisted.</p><p>The JMX MBean which can be used to change the Congestion Control configuration is named <span class="application"><strong>org.mobicents.slee:name=CongestionControlConfiguration</strong></span>, and provides getters and setters to change each property defined in the persistent configuration. The JMX Console can be used to use this MBean, see <a class="xref" href="#management_jmx_console" title="4.4.1. JMX Console">Section 4.4.1, “JMX Console”</a>.</p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="jpa_slee_profiles_mapping"/>9.3. JAIN SLEE 1.1 Profiles JPA Mapping</h2></div></div></div><p>As mentioned in the containers configuration section, Mobicents JAIN SLEE uses JPA to store all JAIN SLEE 1.1 Profiles, and in mentioned section it was explained how to define which JPA / Hibernate data source. In this section more details are provided about how JAIN SLEE 1.1 Profiles are mapped to a JPA datasource schema.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="profile_jpa_tables_and_columns"/>9.3.1. Profile Specification JPA Tables And columns</h3></div></div></div><p>
    For each Profile Specification, at least one <acronym class="acronym">JPA</acronym> Table is created, and is named <code class="literal">SLEE_PE_</code> concatenated with the Profile CMP interface simple name (<code class="literal">obtained as java.lang.Class.getSimpleName()</code>), then <code class="literal">_</code>, and finally the absolute value of the <code class="literal">hashCode()</code> method of the javax.slee.ComponentID of the Profile Specification.
    </p><p>
    This table has a primary key composed by the profile name and profile table name, and a column for each attribute of the Profile Specification CMP, except for those of array type. Those columns are named <code class="literal">C</code>, concatenated with the cmp attribute name.
    </p><p>
    For each Profile CMP attribute of <em class="parameter"><code>array</code></em> type, a join table is created, and is named <code class="literal">SLEE_PEAAV_</code> concatenated with the Profile CMP interface simple name (<code class="literal">obtained as java.lang.Class.getSimpleName()</code>), then <code class="literal">_</code>, then the absolute value of <code class="literal">hashCode()</code> method of the javax.slee.ComponentID of the Profile Specification, and finally the CMP attribute name. This table has a generated primary key column named <code class="literal">ID</code>, the foreign key, and two columns to store the CMP attribute value:
    </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">SERIALIZABLE</code></span></dt><dd><p>
          Used to store the value if its type does not allow it to be converted to a String.
          </p></dd><dt><span class="term"><code class="literal">STRING</code></span></dt><dd><p>
          Used when the CMP attribute type can be converted to a <code class="literal">java.lang.String</code>, for instance an <code class="literal">Integer</code>.
          </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="profile_jpa_datasource"/>9.3.2. Profile Specification JPA Datasource</h3></div></div></div><p>Unless configured manually, Mobicents JAIN SLEE uses the default datasource of JBoss Application Server. Please refer to its documentation to learn about it.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="testing_tck"/>9.4. Testing the JAIN SLEE 1.1 TCK</h2></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><p>To run the JAIN SLEE 1.1 TCK:</p><ol><li><p>Checkout and build the container source code as explained in <a class="xref" href="#install" title="Chapter 2. Installing Mobicents JAIN SLEE">Chapter 2, <i>Installing Mobicents JAIN SLEE</i></a>.</p></li><li><p>Install the TCK Resource Adaptor and Plugin:</p><pre class="screen">cd tck/jain-slee-1.1
mvn install</pre></li><li><p>Setup JAVA_OPTS environment variable to include -XX:MaxPermSize=128M -Djboss.defined.home=<code class="literal">/Volumes/2/jboss-5.1.0.GA</code> -Djava.security.manager=default -Djava.security.policy=<code class="literal">file:///Volumes/2/workspace/mobicents-jainslee-2/</code>tck/jain-slee-1.1/tck-security.policy, replacing the <code class="literal">absolute paths</code> with $JBOSS_HOME and the path of the svn checkout.</p></li><li><p>Unzip and run the JAIN SLEE 1.1 TCK distribution:</p><pre class="screen">unzip testsuite.zip
cd testsuite
ant</pre><div class="important"><h2>Important</h2><p>No test should fail.</p></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="eclipse_ide"/>9.5. Setting JAIN SLEE Source Code Projects in Eclipse IDE</h2></div></div></div><p>The JAIN SLEE Core, each RA, and each example, are worked out with separated Eclipse IDE Projects.</p><p>
    There are two alternatives to set up a specific project:
    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e2795"/><p class="title"><b>Procedure 9.1. Via Command Line</b></p><ol class="1"><li><p>
        In the checked out directory of the project, and with Eclipse IDE closed, open a terminal.
        </p></li><li><p>
        Run the following:
        </p><pre class="screen">
]mvn mobicents:eclipse
mvn -Declipse.workspace=YOUR_RELATIVE_PATH_TO_ECLIPSE_WORKSPACE eclipse:add-maven-repo
        </pre></li><li><p>
        Install M2Eclipse if you want to do maven builds within Eclipse.
        </p></li></ol></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e2809"/><p class="title"><b>Procedure 9.2. With Eclipse IDE</b></p><ul><li><p>
        Install the M2Eclipse plugin and use "Import..." and subselect the "Maven Projects" feature.
        </p><div class="important"><h2>Important</h2><p>
          Ensure the "Resolve Workspace projects" and "Separate projects for modules" in the "Advanced" options on the bottom of the window are turned off. If the project is large, such as the JAIN SLEE Core, M2Eclipse may be a considerable slower option, due to dynamic Maven2 Dependency Management.
          </p></div></li></ul></div></div></div><div class="appendix" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="jdk-installing_configuring_and_running"/>Appendix A. Java Development Kit (<acronym class="acronym">JDK</acronym>): Installing, Configuring and Running</h2></div></div></div><p>
		The <span class="application"><strong>Mobicents Platform</strong></span> is written in Java; therefore, before running any <span class="application"><strong>Mobicents</strong></span> server, you must have a working Java Runtime Environment (<acronym class="acronym">JRE</acronym>) or Java Development Kit (<acronym class="acronym">JDK</acronym>) installed on your system. In addition, the JRE or JDK you are using to run <span class="application"><strong>Mobicents</strong></span> must be version 5 or higher<sup>[<a id="d0e2841" href="#ftn.d0e2841" class="footnote">1</a>]</sup>.
	</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Should I Install the JRE or JDK?</h5><p class="formalpara">
			Although you can run <span class="application"><strong>Mobicents</strong></span> servers using the Java Runtime Environment, we assume that most users are developers interested in developing Java-based, <span class="application"><strong>Mobicents</strong></span>-driven solutions. Therefore, in this guide we take the tact of showing how to install the full Java Development Kit.
		</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Should I Install the 32-Bit or the 64-Bit JDK, and Does It Matter?</h5><p class="formalpara">
			Briefly stated: if you are running on a 64-Bit Linux or Windows platform, you should consider installing and running the 64-bit JDK over the 32-bit one. Here are some heuristics for determining whether you would rather run the 64-bit Java Virtual Machine (JVM) over its 32-bit cousin for your application:
		</p><div class="itemizedlist"><ul><li><p>
				Wider datapath: the pipe between RAM and CPU is doubled, which improves the performance of memory-bound applications when using a 64-bit JVM.
			</p></li><li><p>
				64-bit memory addressing gives virtually unlimited (1 exabyte) heap allocation. However large heaps affect garbage collection.
			</p></li><li><p>
				Applications that run with more than 1.5 GB of RAM (including free space for garbage collection optimization) should utilize the 64-bit JVM.
			</p></li><li><p>
				Applications that run on a 32-bit JVM and do not require more than minimal heap sizes will gain nothing from a 64-bit JVM. Barring memory issues, 64-bit hardware with the same relative clock speed and architecture is not likely to run Java applications faster than their 32-bit cousin.
			</p></li></ul></div><p>
		Note that the following instructions detail how to download and install the 32-bit JDK, although the steps are nearly identical for installing the 64-bit version.
	</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Downloading</h5><p class="formalpara">
			You can download the Sun JDK 5.0 (Java 2 Development Kit) from Sun's website: <a class="ulink" href="http://java.sun.com/javase/downloads/index_jdk5.jsp">http://java.sun.com/javase/downloads/index_jdk5.jsp</a>. Click on the <span class="guilabel"><strong>Download</strong></span> link next to "JDK 5.0 Update <em class="replaceable"><code>&lt;x&gt;</code></em>" (where <em class="replaceable"><code>&lt;x&gt;</code></em> is the latest minor version release number). On the next page, select your language and platform (both architecture—whether 32- or 64-bit—and operating system), read and agree to the <code class="literal">Java Development Kit 5.0 License Agreement</code>, and proceed to the download page.
		</p><p>
		The Sun website will present two download alternatives to you: one is an RPM inside a self-extracting file (for example, <code class="filename">jdk-1_5_0_16-linux-i586-rpm.bin</code>), and the other is merely a self-extracting file (e.g. <code class="filename">jdk-1_5_0_16-linux-i586.bin</code>). If you are installing the JDK on Red Hat Enterprise Linux, Fedora, or another RPM-based Linux system, we suggest that you download the self-extracting file containing the RPM package, which will set up and use the SysV service scripts in addition to installing the JDK. We also suggest installing the self-extracting RPM file if you will be running <span class="application"><strong>Mobicents</strong></span> in a production environment.
	</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Installing</h5><p class="formalpara">
			The following procedures detail how to install the Java Development Kit on both Linux and Windows.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e2919"/><p class="title"><b>Procedure A.1. Installing the JDK on Linux</b></p><ul><li><p>
				Regardless of which file you downloaded, you can install it on Linux by simply making sure the file is executable and then running it:
			</p><pre class="screen">~]$ chmod +x "jdk-1_5_0_&lt;minor_version&gt;-linux-&lt;architecture&gt;-rpm.bin"
~]$ ./"jdk-1_5_0_&lt;minor_version&gt;-linux-&lt;architecture&gt;-rpm.bin"</pre></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>You Installed Using the Non-RPM Installer, but Want the SysV Service Scripts</h2><p>
			If you download the non-RPM self-extracting file (and installed it), and you are running on an RPM-based system, you can still set up the SysV service scripts by downloading and installing one of the <code class="literal">-compat</code> packages from the JPackage project. Remember to download the <code class="literal">-compat</code> package which corresponds correctly to the minor release number of the JDK you installed. The compat packages are available from <a class="ulink" href="ftp://jpackage.hmdc.harvard.edu/JPackage/1.7/generic/RPMS.non-free/">ftp://jpackage.hmdc.harvard.edu/JPackage/1.7/generic/RPMS.non-free/</a>.
		</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>
			You do not need to install a <code class="literal">-compat</code> package in addition to the JDK if you installed the self-extracting RPM file! The <code class="literal">-compat</code> package merely performs the same SysV service script set up that the RPM version of the JDK installer does.
		</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e2950"/><p class="title"><b>Procedure A.2. Installing the JDK on Windows</b></p><ul><li><p>
				Using Explorer, simply double-click the downloaded self-extracting installer and follow the instructions to install the JDK.
			</p></li></ul></div><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Configuring</h5><p class="formalpara">
			Configuring your system for the JDK consists in two tasks: setting the <code class="envar">JAVA_HOME</code> environment variable, and ensuring that the system is using the proper JDK (or JRE) using the <code class="command">alternatives</code> command. Setting <code class="envar">JAVA_HOME</code> usually overrides the values for <code class="command">java</code>, <code class="command">javac</code> and <code class="command">java_sdk_1.5.0</code> in <code class="command">alternatives</code>, but we will set them all just to be safe and consistent.
		</p><div class="variablelist"><dl><dt><span class="term">Setting the <code class="envar">JAVA_HOME</code> Environment Variable on Generic Linux</span></dt><dd><p>
					After installing the JDK, you must ensure that the <code class="envar">JAVA_HOME</code> environment variable exists and points to the location of your JDK installation.
				</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Setting the <code class="envar">JAVA_HOME</code> Environment Variable on Linux</h5><p class="formalpara">
						You can determine whether <code class="envar">JAVA_HOME</code> is set on your system by <code class="command">echo</code>ing it on the command line:
					</p><pre class="screen">~]$ echo $JAVA_HOME</pre><p>
					If <code class="envar">JAVA_HOME</code> is not set already, then you must set its value to the location of the JDK installation on your system. You can do this by adding two lines to your personal <code class="filename">~/.bashrc</code> configuration file. Open <code class="filename">~/.bashrc</code> (or create it if it doesn't exist) and add a line similar to the following one anywhere inside the file:
				</p><pre class="programlisting">export JAVA_HOME="/usr/lib/jvm/jdk1.5.0_&lt;version&gt;"
</pre><p>
					You should also set this environment variable for any other users who will be running <span class="application"><strong>Mobicents</strong></span> (any environment variables <code class="command">export</code>ed from <code class="filename">~/.bashrc</code> files are local to that user).
				</p></dd><dt><span class="term">Setting <code class="envar">java</code>, <code class="envar">javac</code> and <code class="envar">java_sdk_1.5.0</code> Using the <code class="command">alternatives</code> command </span></dt><dd><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Selecting the Correct System JVM on Linux using <code class="command">alternatives</code>
					</h5><p class="formalpara">
						On systems with the <code class="command">alternatives</code> command, including Red Hat Enterprise Linux and Fedora, you can easily choose which JDK (or JRE) installation you wish to use, as well as which <code class="command">java</code> and <code class="command">javac</code> executables should be run when called.
					</p><p>
					<span class="emphasis"><em>As the root user</em></span>, call <code class="command">/usr/sbin/alternatives</code> with the <code class="option">--config java</code> option to select between JDKs and JREs installed on your system:
				</p><pre class="programlisting">root@localhost ~]$ /usr/sbin/alternatives --config java

There are 3 programs which provide 'java'.

  Selection    Command
-----------------------------------------------
   1           /usr/lib/jvm/jre-1.5.0-gcj/bin/java
   2           /usr/lib/jvm/jre-1.6.0-sun/bin/java
*+ 3         /usr/lib/jvm/jre-1.5.0-sun/bin/java


Enter to keep the current selection[+], or type selection number:
</pre><p>
					In our case, we want to use the Sun JDK, version 5, that we downloaded and installed, to run the <code class="command">java</code> executable. In the <code class="command">alternatives</code> information printout above, a plus (<code class="literal">+</code>) next to a number indicates the one currently being used. As per <code class="command">alternatives</code>' instructions, pressing <span class="keycap"><strong>Enter</strong></span> will simply keep the current JVM, or you can enter the number corresponding to the JVM you would prefer to use.
				</p><p>
					Repeat the procedure above for the <code class="command">javac</code> command and the <code class="literal">java_sdk_1.5.0</code> environment variable, <span class="emphasis"><em>as the root user</em></span>:
				</p><pre class="screen">~]$ /usr/sbin/alternatives --config javac</pre><pre class="screen">~]$ /usr/sbin/alternatives --config java_sdk_1.5.0</pre></dd><dt><span class="term">Setting the <code class="envar">JAVA_HOME</code> Environment Variable on Windows</span></dt><dd><p>
					For information on how to set environment variables in Windows, refer to <a class="ulink" href="http://support.microsoft.com/kb/931715">http://support.microsoft.com/kb/931715</a>.
				</p></dd></dl></div><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Testing</h5><p class="formalpara">
			Finally, to make sure that you are using the correct JDK or Java version (5 or higher), and that the java executable is in your <code class="envar">PATH</code>, run the <code class="command">java <code class="option">-version</code>
			</code> command in the terminal from your home directory:
		</p><pre class="screen">~]$ java -version
java version "1.5.0_16"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_16-b03)
Java HotSpot(TM) Client VM (build 1.5.0_16-b03, mixed mode, sharing)</pre><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Uninstalling</h5><p class="formalpara">
			There is usually no reason (other than space concerns) to remove a particular JDK from your system, given that you can switch between JDKs and JREs easily using <code class="command">alternatives</code>, and/or by setting <code class="envar">JAVA_HOME</code>.
		</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Uninstalling the JDK on Linux</h5><p class="formalpara">
			On RPM-based systems, you can uninstall the JDK using the <code class="command">yum <code class="option">remove &lt;jdk_rpm_name&gt;</code>
			</code> command.
		</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Uninstalling the JDK on Windows</h5><p class="formalpara">
			On Windows systems, check the JDK entry in the <code class="literal">Start</code> menu for an uninstall command, or use <code class="literal">Add/Remove Programs</code>.
		</p><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="footnotes"><br/><hr/><div xmlns="http://www.w3.org/1999/xhtml" class="footnote"><p><sup>[<a id="ftn.d0e2841" href="#d0e2841" class="para">1</a>] </sup>
			At this point in time, it is possible to run most <span class="application"><strong>Mobicents</strong></span> servers, such as the JAIN SLEE, using a Java 6 JRE or JDK. Be aware, however, that presently the XML Document Management Server does not run on Java 6. We suggest checking the Mobicents web site, forums or discussion pages if you need to inquire about the status of running the XML Document Management Server with Java 6.
		</p></div></div></div><div class="appendix" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="jboss_home_setup"/>Appendix B. Setting the JBOSS_HOME Environment Variable</h2></div></div></div><p>
		The <span class="application"><strong>Mobicents Platform</strong></span> (<span class="application"><strong>Mobicents</strong></span>) is built on top of the <span class="application"><strong>JBoss Application Server</strong></span>. You do not need to set the <code class="envar">JBOSS_HOME</code> environment variable to run any of the <span class="application"><strong>Mobicents Platform</strong></span> servers <span class="emphasis"><em>unless</em></span> <code class="envar">JBOSS_HOME</code> is <span class="emphasis"><em>already</em></span> set.
	</p><p>The best way to know for sure whether <code class="envar">JBOSS_HOME</code> was set previously or not is to perform a simple check which may save you time and frustration.</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Checking to See If JBOSS_HOME is Set on Unix</h5><p class="formalpara">At the command line, <code class="command">echo</code>
			<strong class="userinput"><code>$JBOSS_HOME</code></strong> to see if it is currently defined in your environment:</p><pre class="screen">~]$ echo $JBOSS_HOME</pre><p>The <span class="application"><strong>Mobicents Platform</strong></span> and most Mobicents servers are built on top of the <span class="application"><strong>JBoss Application Server</strong></span> (<span class="application"><strong>JBoss Application Server</strong></span>). When the <span class="application"><strong>Mobicents Platform</strong></span> or Mobicents servers are built <span class="emphasis"><em>from source</em></span>, then <code class="envar">JBOSS_HOME</code> <span class="emphasis"><em>must</em></span> be set, because the Mobicents files are installed into (or “<span class="quote">over top of</span>” if you prefer) a clean <span class="application"><strong>JBoss Application Server</strong></span> installation, and the build process assumes that the location pointed to by the <code class="envar">JBOSS_HOME</code> environment variable at the time of building is the <span class="application"><strong>JBoss Application Server</strong></span> installation into which you want it to install the Mobicents files.
	</p><p>This guide does not detail building the <span class="application"><strong>Mobicents Platform</strong></span> or any Mobicents servers from source. It is nevertheless useful to understand the role played by <span class="application"><strong>JBoss AS</strong></span> and <code class="envar">JBOSS_HOME</code> in the Mobicents ecosystem.</p><p>
		The immediately-following section considers whether you need to set <code class="envar">JBOSS_HOME</code> at all and, if so, when. The subsequent sections detail how to set <code class="envar">JBOSS_HOME</code> on Unix and Windows
	</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>
			Even if you fall into the category below of <span class="emphasis"><em>not needing</em></span> to set <code class="envar">JBOSS_HOME</code>, you may want to for various reasons anyway. Also, even if you are instructed that you do <span class="emphasis"><em>not need</em></span> to set <code class="envar">JBOSS_HOME</code>, it is good practice nonetheless to check and make sure that <code class="envar">JBOSS_HOME</code> actually <span class="emphasis"><em>isn't</em></span> set or defined on your system for some reason. This can save you both time and frustration.
		</p></div><h2><a id="d0e3302"/>You <span class="emphasis"><em>DO NOT NEED</em></span> to set <code class="envar">JBOSS_HOME</code> if...</h2><div class="itemizedlist"><ul><li><p>
				...you have installed the <span class="application"><strong>Mobicents Platform</strong></span> binary distribution.
			</p></li><li><p>
				...you have installed a Mobicents server binary distribution <span class="emphasis"><em>which bundles <span class="application"><strong>JBoss Application Server</strong></span>.</em></span>
			</p></li></ul></div><h2><a id="d0e3326"/>You <span class="emphasis"><em>MUST</em></span> set <code class="envar">JBOSS_HOME</code> if...</h2><div class="itemizedlist"><ul><li><p>
				...you are installing the <span class="application"><strong>Mobicents Platform</strong></span> or any of the Mobicents servers <span class="emphasis"><em>from source</em></span>.
			</p></li><li><p>
				...you are installing the <span class="application"><strong>Mobicents Platform</strong></span> binary distribution, or one of the Mobicents server binary distributions, which <span class="emphasis"><em>do not</em></span> bundle <span class="application"><strong>JBoss Application Server</strong></span>.
			</p></li></ul></div><p>
		Naturally, if you installed the <span class="application"><strong>Mobicents Platform</strong></span> or one of the Mobicents server binary releases which <span class="emphasis"><em>do not</em></span> bundle <span class="application"><strong>JBoss Application Server</strong></span>, yet requires it to run, then you should install before setting <code class="envar">JBOSS_HOME</code> or proceeding with anything else.
	</p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Setting the JBOSS_HOME Environment Variable on Unix</h5><p class="formalpara">
			The <code class="envar">JBOSS_HOME</code> environment variable must point to the directory which contains all of the files for the <span><span class="application"><strong>Mobicents Platform</strong></span> or individual Mobicents server</span> that you installed. As another hint, this topmost directory contains a <code class="filename">bin</code> subdirectory.
		</p><p>
		Setting <code class="envar">JBOSS_HOME</code> in your personal <code class="filename">~/.bashrc</code> startup script carries the advantage of retaining effect over reboots. Each time you log in, the environment variable is sure to be set for you, as a user. On Unix, it is possible to set <code class="envar">JBOSS_HOME</code> as a system-wide environment variable, by defining it in <code class="filename">/etc/bashrc</code>, but this method is neither recommended nor detailed in these instructions.
	</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e3400"/><p class="title"><b>Procedure B.1. To Set JBOSS_HOME on Unix...</b></p><ol class="1"><li><p>
				Open the <code class="filename">~/.bashrc</code> startup script, which is a hidden file in your home directory, in a text editor, and insert the following line on its own line while substituting for the actual install location on your system:
			</p><pre class="screen">export JBOSS_HOME="/home/&lt;username&gt;/&lt;path&gt;/&lt;to&gt;/&lt;install_directory&gt;"</pre></li><li><p>
				Save and close the <code class="filename">.bashrc</code> startup script.
			</p></li><li><p>
				You should <code class="command">source</code> the <code class="filename">.bashrc</code> script to force your change to take effect, so that <code class="envar">JBOSS_HOME</code> becomes set for the current session<sup>[<a id="d0e3430" href="#ftn.d0e3430" class="footnote">2</a>]</sup>.
			</p><pre class="screen">~]$ source ~/.bashrc</pre></li><li><p>
				Finally, ensure that <code class="envar">JBOSS_HOME</code> is set in the current session, and actually points to the correct location:
			</p><div class="note"><h2>Note</h2><p>
					The command line usage below is based upon a binary installation of the <span class="application"><strong>Mobicents Platform</strong></span>. In this sample output, <code class="envar">JBOSS_HOME</code> has been set correctly to the <em class="replaceable"><code>topmost_directory</code></em> of the <span class="application"><strong>Mobicents</strong></span> installation. Note that if you are installing one of the standalone <span class="application"><strong>Mobicents</strong></span> servers (with <span class="application"><strong>JBoss AS</strong></span> bundled!), then <code class="envar">JBOSS_HOME</code> would point to the <em class="replaceable"><code>topmost_directory</code></em> of your server installation.
				</p></div><pre class="screen">~]$ echo $JBOSS_HOME
/home/silas/&lt;path&gt;/&lt;to&gt;/&lt;install_directory&gt;</pre></li></ol></div><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Setting the JBOSS_HOME Environment Variable on Windows</h5><p class="formalpara">
			The <code class="envar">JBOSS_HOME</code> environment variable must point to the directory which contains all of the files for the <span>Mobicents Platform or individual Mobicents server</span> that you installed. As another hint, this topmost directory contains a <code class="filename">bin</code> subdirectory.
		</p><p>
		For information on how to set environment variables in recent versions of Windows, refer to <a class="ulink" href="http://support.microsoft.com/kb/931715">http://support.microsoft.com/kb/931715</a>.
	</p><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="footnotes"><br/><hr/><div xmlns="http://www.w3.org/1999/xhtml" class="footnote"><p><sup>[<a id="ftn.d0e3430" href="#d0e3430" class="para">2</a>] </sup>
					Note that any other terminals which were opened prior to your having altered <code class="filename">.bashrc</code> will need to <code class="command">source</code>
						<code class="filename">~/.bashrc</code> as well should they require access to <code class="envar">JBOSS_HOME</code>.
				</p></div></div></div><div class="appendix" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="fault_tolerant_cluster_example"/>Appendix C. Fault Tolerant Clustering - A Concrete Example</h2></div></div></div><p>In order to highlight the behavior of the Mobicents JAIN SLEE server when run in fault tolerant clustering mode, a concrete situation is described below.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="ft_example_overview"/>C.1. Example Overview</h2></div></div></div><p>The example below outlines a situation where two Mobicents JAIN SLEE nodes (<code class="literal">Node-1</code> and <code class="literal">Node-2</code>) are configured to run in fault tolerant mode. Both nodes have the same deployable unit containing a custom <acronym class="acronym">SBB</acronym>. A null activity <acronym class="acronym">ACI</acronym> is used by the <acronym class="acronym">SBB</acronym>s to communicate.</p><p>The service is a simple application that relays information received in <acronym class="acronym">SIP</acronym> INFO messages to another incoming <acronym class="acronym">SIP</acronym> dialog. This might for example be a rudimentary chat application. The flow outlines the clustered execution of the base case of this application, e.g. receive one message on one dialog and send it out on another dialog.</p><p>The example starts with the creation of two <acronym class="acronym">SBB</acronym> entities. One of the entities is the receiver, and the other one is the sender. The receiver will create an <acronym class="acronym">ACI</acronym> and register this with the <acronym class="acronym">ACI</acronym> naming facility. The sender retrieves the <acronym class="acronym">ACI</acronym> and sends a message to the receiver using an event. The example ends when the receiver sends the acquired message on its <acronym class="acronym">SIP</acronym> dialog as an INFO message.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="ft_example_step1"/>C.2. Creating Sbb entities</h2></div></div></div><p>The base case starts with a <acronym class="acronym">SIP</acronym> INVITE being received in <code class="literal">Node-1</code>. The event will be routed inside <code class="literal">Node-1</code> and trigger the creation of a new <acronym class="acronym">SBB</acronym> entity (<code class="literal">Sbb-1</code>). The <acronym class="acronym">SBB</acronym> entity in turn create and attach to a new null activity <acronym class="acronym">ACI</acronym> (<code class="literal">ACI-1</code>). Concurrently another <acronym class="acronym">SIP</acronym> INVITE is received in <code class="literal">Node-2</code>, which causes the JAIN SLEE container to create another <acronym class="acronym">SBB</acronym> entity (<code class="literal">Sbb-2</code>). Both <acronym class="acronym">ACI</acronym>s and <acronym class="acronym">SBB</acronym>s are fully clustered, so even though they are created in different physical nodes, they are logically inside the same container. In the image below, the cloud represents this logical relationship.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Note that balancer is not a requirement. It is present in this example to show basic message flow with balancer in front of deployed containers.</p></div><div class="figure"><a id="d0e3603"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/slee-clustering1.png" align="middle" alt="Fault tolerant cluster consisting of two nodes that both have one created on SBB entity for chat application. The SIP load balancer is multiplexing the SIP traffic."/></div></div><p class="title"><b>Figure C.1. Fault tolerant cluster consisting of two nodes that both have one created on SBB entity for chat application. The SIP load balancer is multiplexing the SIP traffic.</b></p></div><br class="figure-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="ft_example_step2"/>C.3. Relaying the Message</h2></div></div></div><p>After the <acronym class="acronym">SBB</acronym>s have been set up, a <acronym class="acronym">SIP</acronym> INFO is received by <code class="literal">Node-2</code> and relayed to <code class="literal">Sbb-2</code>. <code class="literal">Sbb-2</code> then looks up <code class="literal">ACI-1</code> from the ACI naming facility. <code class="literal">Node-2</code> retrieves the clustered state of <code class="literal">ACI-1</code> and de-serializes it for <code class="literal">Sbb-2</code>. Note that this means that <code class="literal">ACI-1</code> is currently being handled in <code class="literal">Node-2</code>.</p><p>When <code class="literal">ACI-1</code> has been retrieved from the cluster, <code class="literal">Sbb-2</code> fires a MessageEvent on <code class="literal">ACI-1</code>. Since events are not clustered, the event will be routed only on <code class="literal">Node-2</code>. The event will, however, be delivered to all attached <acronym class="acronym">SBB</acronym>s. This is achieved by <code class="literal">Node-2</code> retrieving the <code class="literal">Sbb-1</code> entity from the cluster and delivering the event to it.</p><p>The MessageEvent is parsed by <code class="literal">Sbb-1</code> and an outgoing <acronym class="acronym">SIP</acronym> INFO message is constructed with the appropriate payload. <code class="literal">Sbb-1</code> then forwards the INFO message to the SipRA. The incoming <acronym class="acronym">SIP</acronym> dialog that spawned <code class="literal">Sbb-1</code> is in <code class="literal">Node-1</code>, hence the SipRA will retrieve the activity object from the cluster and send the INFO message. The <acronym class="acronym">SIP</acronym> load balancer will then handle de-multiplexing. Note that retrieving the activity object from the clustered state only works because the SipRA is explicitly handling the replication of the SIP activity objects. Had another <acronym class="acronym">RA</acronym> than the SipRA been used, a similar kind of clustering would have been needed to be implemented using the <code class="literal">FaultTolerantResourceAdaptor</code> interfaces.</p><div class="figure"><a id="d0e3699"/><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/slee-clustering2.png" align="middle" alt="The situation when relaying the INFO message. Both SBB entities are running in the same node."/></div></div><p class="title"><b>Figure C.2. The situation when relaying the INFO message. Both SBB entities are running in the same node.</b></p></div><br class="figure-break"/></div></div><div class="appendix" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="revision_history"/>Appendix D. Revision History</h2></div></div></div><p>
		<div class="revhistory"><table border="0" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1.0</td><td align="left">Tue Dec 22 2009</td><td align="left"><span class="author"><span class="firstname">Eduardo</span> <span class="surname">Martins</span></span></td></tr><tr><td align="left" colspan="3">
					<table class="simplelist" border="0" summary="Simple list"><tr><td>Creation of the Mobicents JAIN SLEE 2.x User Guide.</td></tr></table>
				</td></tr><tr><td align="left">Revision 1.1</td><td align="left">Fri Mar 25 2011</td><td align="left"><span class="author"><span class="firstname">Carl-Magnus</span> <span class="surname">BjÃ¶rkell</span></span></td></tr><tr><td align="left" colspan="3">
					<table class="simplelist" border="0" summary="Simple list"><tr><td>Clarifications to the clustering section. Added a clustering example to the appendix.</td></tr></table>
				</td></tr></table></div>
	</p></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3744"/>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>F</h3><dl><dt>feedback, <a class="indexterm" href="#d0e386">Provide feedback to the authors!</a></dt></dl></div></div></div></div></body></html>