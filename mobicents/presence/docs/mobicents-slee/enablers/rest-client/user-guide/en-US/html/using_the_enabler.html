<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 4. Using the Mobicents JAIN SLEE REST Client Enabler</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="Mobicents JAIN SLEE REST Client Enabler User Guide"/><link rel="up" href="index.html" title="Mobicents JAIN SLEE REST Client Enabler User Guide"/><link rel="prev" href="integrating.html" title="Chapter 3. Integrating the Mobicents JAIN SLEE REST Client Enabler"/><link rel="next" href="logging_traces_and_alarms.html" title="Chapter 5. Traces and Alarms"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="integrating.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="logging_traces_and_alarms.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="using_the_enabler"/>Chapter 4. Using the Mobicents JAIN SLEE REST Client Enabler</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="using_the_enabler.html#the_child_sbblocalobject_interface">4.1. The Child's SbbLocalObject Interface</a></span></dt><dt><span class="section"><a href="using_the_enabler.html#creating_and_retrieving_the_child_sbb">4.2. Creating And Retrieving The Child Sbb</a></span></dt><dt><span class="section"><a href="using_the_enabler.html#creating_requests">4.3. Creating Requests for REST Resources</a></span></dt></dl></div><p>In the last chapter we integrated the Enabler in the JAIN SLEE Service's Sbb, the Parent Sbb, in this chapter it is explained how to use the Enabler's Sbb, the Child Sbb.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="the_child_sbblocalobject_interface"/>4.1. The Child's SbbLocalObject Interface</h2></div></div></div><p>The Mobicents JAIN SLEE REST Client Enabler Sbb, the Child Sbb, implements the <code class="literal">org.mobicents.slee.enabler.rest.client.RESTClientEnablerChildSbbLocalObject</code>, which extends the <code class="literal">org.mobicents.slee.SbbLocalObjectExt</code> and <code class="literal">org.mobicents.slee.enabler.rest.client.RESTClientEnablerChild</code> interfaces, the latter declares the methods which can be used to interact with the REST Web Service:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">mobicents</span><span class="java_separator">.</span><span class="java_plain">slee</span><span class="java_separator">.</span><span class="java_plain">enabler</span><span class="java_separator">.</span><span class="java_plain">rest</span><span class="java_separator">.</span><span class="java_plain">client</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">RESTClientEnablerChild</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;execute</span><span class="java_separator">(</span><span class="java_type">RESTClientEnablerRequest</span><span class="java_plain">&nbsp;request</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><div class="variablelist"><dl><dt><span class="term">The <code class="literal">execute(RESTClientEnablerRequest)</code> method:</span></dt><dd><p>Executes the specified request asynchronously.</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="creating_and_retrieving_the_child_sbb"/>4.2. Creating And Retrieving The Child Sbb</h2></div></div></div><p>The Child Relation in the Parent Sbb Abstract Class is used to create and retrieve the Child Sbb:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">RESTClientEnablerChild</span><span class="java_plain">&nbsp;sbb&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;creation</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sbb&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">RESTClientEnablerChild</span><span class="java_separator">)</span><span class="java_plain">&nbsp;getRESTClientEnablerChildRelation</span><span class="java_separator">().</span><span class="java_plain">create</span><span class="java_separator">(</span><span class="java_plain">childName</span><span class="java_separator">);</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;e</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tracer</span><span class="java_separator">.</span><span class="java_plain">severe</span><span class="java_separator">(</span><span class="java_literal">&quot;Failed&nbsp;to&nbsp;create&nbsp;child&nbsp;sbb&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;e</span><span class="java_separator">);</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;retrieval</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sbb&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">RESTClientEnablerChild</span><span class="java_separator">)</span><span class="java_plain">&nbsp;getRESTClientEnablerChildRelation</span><span class="java_separator">().</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">childName</span><span class="java_separator">);</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;e</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tracer</span><span class="java_separator">.</span><span class="java_plain">severe</span><span class="java_separator">(</span><span class="java_literal">&quot;Failed&nbsp;to&nbsp;retrieve&nbsp;child&nbsp;sbb&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;e</span><span class="java_separator">);</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="creating_requests"/>4.3. Creating Requests for REST Resources</h2></div></div></div><p>Requests are instances of <code class="literal">org.mobicents.slee.enabler.rest.client.RESTClientEnablerRequest</code>, which include all the mandatory and optional data, needed by the Enabler to send the HTTP messages to the REST Web Services.</p><p>The only mandatory data is the request type (the HTTP message method name) and the REST Web Service URI, but the application using the enabler may also include a SignPost OAuthConsumer object, to sign the request according to OAuth protocol, additional headers and/or content to include in the HTTP message, and content. The following Java code examples the creation of a POST request to update status in the Twitter network:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;uri&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;http://api.twitter.com/1/statuses/update.json?status=&quot;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_type">URLEncoder</span><span class="java_separator">.</span><span class="java_plain">encode</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;Hello&nbsp;Twitter!&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;UTF-8&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CommonsHttpOAuthConsumer</span><span class="java_plain">&nbsp;consumer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">CommonsHttpOAuthConsumer</span><span class="java_separator">(</span><span class="java_plain">twitterConsumerKey</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;twitterConsumerSecret</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;consumer</span><span class="java_separator">.</span><span class="java_plain">setTokenWithSecret</span><span class="java_separator">(</span><span class="java_plain">twitterAccessToken</span><span class="java_separator">,</span><span class="java_plain">twitterAccessTokenKey</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">RESTClientEnablerRequest</span><span class="java_plain">&nbsp;request&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">RESTClientEnablerRequest</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">RESTClientEnablerRequest</span><span class="java_separator">.</span><span class="java_type">Type</span><span class="java_separator">.</span><span class="java_plain">POST</span><span class="java_separator">,</span><span class="java_plain">&nbsp;uri</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setOAuthConsumer</span><span class="java_separator">(</span><span class="java_plain">consumer</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="integrating.html"><strong>Prev</strong>Chapter 3. Integrating the Mobicents JAIN SLEE RE...</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="logging_traces_and_alarms.html"><strong>Next</strong>Chapter 5. Traces and Alarms</a></li></ul></body></html>