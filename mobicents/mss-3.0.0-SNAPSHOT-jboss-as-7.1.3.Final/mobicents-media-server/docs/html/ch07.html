<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 7. MMS: Best Practices</title><link rel="stylesheet" type="text/css" href="css/telestax_org.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"/><link rel="home" href="index.html" title="Media Server User Guide"/><link rel="up" href="index.html" title="Media Server User Guide"/><link rel="prev" href="ch06.html" title="Chapter 6. MMS Demonstration Example"/><link rel="next" href="apa.html" title="Appendix A. Understanding Digital Signal Processing and Streaming"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><p xmlns:d="http://docbook.org/ns/docbook" id="title"><a href="http://www.telestax.com" class="site_href"><strong>TeleStax.org</strong></a><a href="http://www.telestax.com/" class="doc_href"><strong>Community Documentation</strong></a></p><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="ch06.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="apa.html"><strong>Next</strong></a></li></ul><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="msbp-MS-Best_Practices"/>Chapter 7. MMS: Best Practices</h1></div></div></div><div class="toc"><dl><dt><span class="section"><a href="ch07.html#d0e2550">7.1. Mobicents Media Server Best Practices</a></span></dt><dd><dl><dt><span class="section"><a href="ch07.html#d0e2555">7.1.1. DTMF Detection Mode: RFC2833 versus Inband versus Auto</a></span></dt><dt><span class="section"><a href="ch07.html#d0e2586">7.1.2. Transcoding Is CPU-Intensive</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2550"/>7.1. Mobicents Media Server Best Practices</h2></div></div></div><p>Note: these best practices apply to Mobicents Media Server version 3.0.0.FINAL and later</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2555"/>7.1.1. DTMF Detection Mode: RFC2833 versus Inband versus Auto</h3></div></div></div><p>The Mobicents Media Server will block the resource depending on the DTMF detection mode configured in <span class="emphasis"><em>jboss-service.xml</em></span> at start-up time. Inband is highly resource-intensive and must perform many more calculations in order to detect DTMF when compared to RFC2833. So if your application already knows that User Agents (UAs) support RFC2833, it is always better to configure DTMF mode as <span class="emphasis"><em>RFC2833</em></span> rather than as <span class="emphasis"><em>Inband</em></span> or <span class="emphasis"><em>Auto</em></span>. Also, please note that <span class="emphasis"><em>Auto</em></span> is even more resource-intensive because it does not know beforehand whether DTMF would be Inband or <span class="emphasis"><em>RFC2833</em></span>, and hence both detection methods must be started. The default detection mode is <span class="emphasis"><em>RFC2833</em></span>. </p><p>All of the Conference, Packet Relay and IVR endpoints have DTMF detection enabled; the mode can be configured using <span class="emphasis"><em>jboss-service.xml</em></span>. We advise retaining the same mode for all three, but this is not a necessity.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2586"/>7.1.2. Transcoding Is CPU-Intensive</h3></div></div></div><p>Digital Signal Processing (DSP) is very costly and should be avoided as much as possible. By default, Announcement endpoints and IVR endpoints do not have DSP enabled. What this means is that your application needs to know beforehand which codecs are supported by your UA; you can then ask Announcement or IVR to play an audio file which has been pre-encoded in one of these formats. The onus of deciding which pre-encoded file to play lies with the application.  For example, if I am writing a simple announcement application that would only play announcements to the end user, and I know that my end users have one of either the <span class="emphasis"><em>PCMU</em></span> or <span class="emphasis"><em>GSM</em></span> codecs, then I would make sure to have pre-encoded audio files such as <span class="emphasis"><em>helloworld-pcmu.wav</em></span> and <span class="emphasis"><em>helloworld-gsm.gsm</em></span>. Then, when the UA attempts to connect to the Media Server, my application knows which codecs the UA supports and can ask the  to play the respective file.</p><p>This strategy will work fine because, most of the time in the telecommunications world, applications have a known set of supported codecs, .However if this is not true, or if you are writing a simple demo application and need or want all codecs to be supported, you can put a Packet Relay endpoint in front of Announcement or IVR endpoint. This way, the Packet Relay will do all necessary digital signal processing, and your application need not bother about which audio file to play. The audio file in this case will be encoded in <span class="emphasis"><em>Linear</em></span> format, and all UAs, irrespective of whether they support <span class="emphasis"><em>PCMU</em></span>, <span class="emphasis"><em>PCMA</em></span>, <span class="emphasis"><em>Speex</em></span>, <span class="emphasis"><em>G729</em></span> or <span class="emphasis"><em>GSM</em></span> codecs, would be able to hear the announcement.</p></div></div></div><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="ch06.html"><strong>Prev</strong>Chapter 6. MMS Demonstration Example</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="apa.html"><strong>Next</strong>Appendix A. Understanding Digital Signal Processi...</a></li></ul></body></html>